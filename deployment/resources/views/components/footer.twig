<footer class="footer bg-dark text-light py-5 mt-5">
    <div class="container">
        <div class="row">
            <!-- 公司信息 -->
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="footer-section">
                    <h5 class="footer-title">
                        <img src="{{ asset('images/logo.svg') }}" alt="{{ app.name }}" height="24" class="me-2">
                        {{ app.name }}
                    </h5>
                    <p class="footer-description">
                        智能AI助手平台，为您提供先进的人工智能服务，包括智能对话、文档处理、数据分析等功能。
                        让AI技术更好地为您的工作和生活服务。
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link" title="微信">
                            <i class="bi bi-wechat"></i>
                        </a>
                        <a href="#" class="social-link" title="微博">
                            <i class="bi bi-sina-weibo"></i>
                        </a>
                        <a href="#" class="social-link" title="QQ">
                            <i class="bi bi-tencent-qq"></i>
                        </a>
                        <a href="#" class="social-link" title="GitHub">
                            <i class="bi bi-github"></i>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 产品服务 -->
            <div class="col-lg-2 col-md-6 mb-4">
                <div class="footer-section">
                    <h6 class="footer-title">{{ trans('products_services') }}</h6>
                    <ul class="footer-links">
                        <li><a href="{{ url('chat') }}">{{ trans('ai_chat') }}</a></li>
                        <li><a href="{{ url('documents') }}">{{ trans('document_processing') }}</a></li>
                        <li><a href="{{ url('analytics') }}">{{ trans('data_analytics') }}</a></li>
                        <li><a href="{{ url('api') }}">{{ trans('api_services') }}</a></li>
                        <li><a href="{{ url('integrations') }}">{{ trans('integrations') }}</a></li>
                    </ul>
                </div>
            </div>

            <!-- 解决方案 -->
            <div class="col-lg-2 col-md-6 mb-4">
                <div class="footer-section">
                    <h6 class="footer-title">{{ trans('solutions') }}</h6>
                    <ul class="footer-links">
                        <li><a href="{{ url('solutions/enterprise') }}">{{ trans('enterprise') }}</a></li>
                        <li><a href="{{ url('solutions/education') }}">{{ trans('education') }}</a></li>
                        <li><a href="{{ url('solutions/healthcare') }}">{{ trans('healthcare') }}</a></li>
                        <li><a href="{{ url('solutions/finance') }}">{{ trans('finance') }}</a></li>
                        <li><a href="{{ url('solutions/custom') }}">{{ trans('custom_solutions') }}</a></li>
                    </ul>
                </div>
            </div>

            <!-- 支持帮助 -->
            <div class="col-lg-2 col-md-6 mb-4">
                <div class="footer-section">
                    <h6 class="footer-title">{{ trans('support') }}</h6>
                    <ul class="footer-links">
                        <li><a href="{{ url('help') }}">{{ trans('help_center') }}</a></li>
                        <li><a href="{{ url('docs') }}">{{ trans('documentation') }}</a></li>
                        <li><a href="{{ url('tutorials') }}">{{ trans('tutorials') }}</a></li>
                        <li><a href="{{ url('community') }}">{{ trans('community') }}</a></li>
                        <li><a href="{{ url('contact') }}">{{ trans('contact_us') }}</a></li>
                    </ul>
                </div>
            </div>

            <!-- 联系信息 -->
            <div class="col-lg-2 col-md-6 mb-4">
                <div class="footer-section">
                    <h6 class="footer-title">{{ trans('contact_info') }}</h6>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="bi bi-envelope me-2"></i>
                            <a href="mailto:support@alingai.com">support@alingai.com</a>
                        </div>
                        <div class="contact-item">
                            <i class="bi bi-telephone me-2"></i>
                            <a href="tel:+86-400-123-4567">400-123-4567</a>
                        </div>
                        <div class="contact-item">
                            <i class="bi bi-geo-alt me-2"></i>
                            <span>北京市朝阳区科技园区</span>
                        </div>
                        <div class="contact-item">
                            <i class="bi bi-clock me-2"></i>
                            <span>7×24小时服务</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr class="footer-divider">

        <!-- 底部信息 -->
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="footer-bottom-left">
                    <p class="mb-0">
                        &copy; {{ "now"|date("Y") }} {{ app.name }}. {{ trans('all_rights_reserved') }}
                    </p>
                    <div class="footer-meta">
                        <span>{{ trans('version') }}: {{ app.version }}</span>
                        <span class="mx-2">|</span>
                        <span id="footer-build-info">{{ trans('build') }}: {{ "now"|date("Y-m-d") }}</span>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="footer-bottom-right text-md-end">
                    <div class="footer-legal-links">
                        <a href="{{ url('privacy') }}">{{ trans('privacy_policy') }}</a>
                        <a href="{{ url('terms') }}">{{ trans('terms_of_service') }}</a>
                        <a href="{{ url('cookies') }}">{{ trans('cookie_policy') }}</a>
                        <a href="{{ url('legal') }}">{{ trans('legal_notice') }}</a>
                    </div>
                    <div class="footer-certifications mt-2">
                        <img src="{{ asset('images/certifications/iso27001.png') }}" alt="ISO 27001" height="20" class="me-2">
                        <img src="{{ asset('images/certifications/gdpr.png') }}" alt="GDPR" height="20" class="me-2">
                        <span class="certification-text">安全认证</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 系统状态指示器 -->
        <div class="system-status-footer mt-3">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-center align-items-center">
                        <small class="text-muted me-3">{{ trans('system_status') }}:</small>
                        <div class="status-indicators">
                            <div class="status-item">
                                <span class="status-dot bg-success" id="api-status"></span>
                                <small>API</small>
                            </div>
                            <div class="status-item">
                                <span class="status-dot bg-success" id="db-status"></span>
                                <small>{{ trans('database') }}</small>
                            </div>
                            <div class="status-item">
                                <span class="status-dot bg-success" id="cache-status"></span>
                                <small>{{ trans('cache') }}</small>
                            </div>
                            <div class="status-item">
                                <span class="status-dot bg-success" id="websocket-status"></span>
                                <small>WebSocket</small>
                            </div>
                        </div>
                        <a href="{{ url('status') }}" class="btn btn-sm btn-outline-secondary ms-3">
                            {{ trans('detailed_status') }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 返回顶部按钮 -->
    <button id="back-to-top" class="back-to-top-btn" title="{{ trans('back_to_top') }}">
        <i class="bi bi-arrow-up"></i>
    </button>
</footer>

<!-- 页脚相关脚本 -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // 返回顶部按钮功能
    const backToTopBtn = document.getElementById('back-to-top');
    
    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            backToTopBtn.classList.add('show');
        } else {
            backToTopBtn.classList.remove('show');
        }
    });
    
    backToTopBtn.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
    
    // 系统状态检查
    checkSystemStatus();
    setInterval(checkSystemStatus, 60000); // 每分钟检查一次
    
    // 动态更新构建信息
    updateBuildInfo();
});

// 检查系统状态
async function checkSystemStatus() {
    try {
        const response = await fetch('{{ url("api/system/health") }}', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        
        if (response.ok) {
            const data = await response.json();
            if (data.success) {
                updateStatusIndicators(data.data);
            }
        }
    } catch (error) {
        console.error('Failed to check system status:', error);
        setAllStatusOffline();
    }
}

// 更新状态指示器
function updateStatusIndicators(status) {
    const indicators = {
        'api-status': status.api || false,
        'db-status': status.database || false,
        'cache-status': status.cache || false,
        'websocket-status': status.websocket || false
    };
    
    Object.entries(indicators).forEach(([id, isOnline]) => {
        const element = document.getElementById(id);
        if (element) {
            element.className = `status-dot ${isOnline ? 'bg-success' : 'bg-danger'}`;
        }
    });
}

// 设置所有状态为离线
function setAllStatusOffline() {
    const statusElements = document.querySelectorAll('.status-dot');
    statusElements.forEach(element => {
        element.className = 'status-dot bg-danger';
    });
}

// 更新构建信息
function updateBuildInfo() {
    const buildInfo = document.getElementById('footer-build-info');
    if (buildInfo && window.APP_CONFIG.debug) {
        const now = new Date();
        buildInfo.textContent = `{{ trans('build') }}: ${now.toLocaleDateString()} ${now.toLocaleTimeString()}`;
    }
}

// 社交分享功能
function shareToSocial(platform, url = window.location.href, title = document.title) {
    const shareUrls = {
        wechat: `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(url)}`,
        weibo: `https://service.weibo.com/share/share.php?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`,
        qq: `https://connect.qq.com/widget/shareqq/index.html?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}`
    };
    
    if (platform === 'wechat') {
        // 显示二维码分享
        showQRCode(shareUrls.wechat, '微信扫码分享');
    } else if (shareUrls[platform]) {
        window.open(shareUrls[platform], '_blank', 'width=600,height=400');
    }
}

// 显示二维码
function showQRCode(qrUrl, title) {
    const modal = document.createElement('div');
    modal.className = 'modal fade';
    modal.innerHTML = `
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">${title}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="${qrUrl}" alt="QR Code" class="img-fluid">
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    const bsModal = new bootstrap.Modal(modal);
    bsModal.show();
    
    modal.addEventListener('hidden.bs.modal', function() {
        document.body.removeChild(modal);
    });
}
</script>

<style>
.footer {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border-top: 1px solid #2c3e50;
}

.footer-title {
    color: #fff;
    font-weight: 600;
    margin-bottom: 1rem;
    font-size: 1.1rem;
}

.footer-description {
    color: #bdc3c7;
    line-height: 1.6;
    margin-bottom: 1.5rem;
}

.footer-links {
    list-style: none;
    padding: 0;
    margin: 0;
}

.footer-links li {
    margin-bottom: 0.5rem;
}

.footer-links a {
    color: #bdc3c7;
    text-decoration: none;
    transition: color 0.3s ease;
    font-size: 0.9rem;
}

.footer-links a:hover {
    color: #3498db;
}

.social-links {
    margin-top: 1rem;
}

.social-link {
    display: inline-block;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    text-align: center;
    line-height: 40px;
    color: #bdc3c7;
    text-decoration: none;
    margin-right: 10px;
    transition: all 0.3s ease;
}

.social-link:hover {
    background: #3498db;
    color: #fff;
    transform: translateY(-2px);
}

.contact-info {
    font-size: 0.9rem;
}

.contact-item {
    margin-bottom: 0.75rem;
    color: #bdc3c7;
}

.contact-item a {
    color: #bdc3c7;
    text-decoration: none;
}

.contact-item a:hover {
    color: #3498db;
}

.footer-divider {
    border-color: #34495e;
    margin: 2rem 0 1.5rem;
}

.footer-bottom-left p {
    color: #95a5a6;
    font-size: 0.9rem;
}

.footer-meta {
    font-size: 0.8rem;
    color: #7f8c8d;
    margin-top: 0.5rem;
}

.footer-legal-links a {
    color: #95a5a6;
    text-decoration: none;
    font-size: 0.9rem;
    margin-left: 1rem;
}

.footer-legal-links a:hover {
    color: #3498db;
}

.footer-certifications {
    opacity: 0.8;
}

.certification-text {
    font-size: 0.8rem;
    color: #95a5a6;
}

.system-status-footer {
    border-top: 1px solid #34495e;
    padding-top: 1rem;
}

.status-indicators {
    display: flex;
    gap: 1rem;
}

.status-item {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
}

.back-to-top-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    background: #3498db;
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
}

.back-to-top-btn.show {
    opacity: 1;
    visibility: visible;
}

.back-to-top-btn:hover {
    background: #2980b9;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(52, 152, 219, 0.4);
}

@media (max-width: 767.98px) {
    .footer {
        padding: 2rem 0;
    }
    
    .footer-bottom-right {
        text-align: center !important;
        margin-top: 1rem;
    }
    
    .footer-legal-links a {
        margin: 0 0.5rem;
        display: inline-block;
    }
    
    .status-indicators {
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.5rem;
    }
    
    .back-to-top-btn {
        bottom: 20px;
        right: 20px;
        width: 45px;
        height: 45px;
    }
}
</style>
