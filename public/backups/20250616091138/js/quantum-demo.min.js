class QuantumChatDemo{constructor(){this.isRunning=false;this.demoSteps=[{name: 'ç”¨æˆ·å‘é€æ¶ˆæ¯',action: 'userMessageSent',message: 'ä½ å¥½ï¼ŒAIåŠ©æ‰‹ï¼',duration: 2000,description: 'ç”¨æˆ·è¾“å…¥æ¶ˆæ¯æ—¶ï¼Œé‡å­çƒå‘ˆç°è“è‰²è„‰å†²æ•ˆæœ'},{name: 'AIå¼€å§‹æ€è€ƒ',action: 'aiThinking',message: '',duration: 3000,description: 'AIå¤„ç†æ¶ˆæ¯æ—¶ï¼Œé‡å­çƒæ˜¾ç¤ºç´«è‰²æ³¢åŠ¨å’Œè¿æ¥çº¿åŠ é€Ÿ'},{name: 'AIå›å¤æ¶ˆæ¯',action: 'aiResponseReceived',message: 'ä½ å¥½ï¼æˆ‘æ˜¯æ™ºèƒ½åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ',duration: 2000,description: 'AIå“åº”æ—¶ï¼Œé‡å­çƒå‘ˆç°ç»¿è‰²å…‰èŠ’å’Œå…‰æŸæ•ˆæœ'},{name: 'ç½‘ç»œé”™è¯¯',action: 'chatError',message: 'ç½‘ç»œè¿æ¥å¤±è´¥',duration: 2000,description: 'å‡ºç°é”™è¯¯æ—¶ï¼Œé‡å­çƒæ˜¾ç¤ºçº¢è‰²è­¦å‘Šå’Œéœ‡åŠ¨æ•ˆæœ'}];this.currentStep=0;}async startDemo(){if(this.isRunning){console.log('æ¼”ç¤ºå·²åœ¨è¿è¡Œä¸­...');return;}console.log('ğŸ¬ å¼€å§‹é‡å­çƒèŠå¤©é›†æˆæ¼”ç¤º');this.isRunning=true;this.currentStep=0;if(!window.quantumChatIntegrator){console.log('â³ ç­‰å¾…é‡å­çƒé›†æˆå™¨å°±ç»ª...');await this.waitForIntegrator();}this.createDemoUI();await this.runDemoLoop();this.isRunning=false;console.log('âœ… æ¼”ç¤ºå®Œæˆ');}async waitForIntegrator(){return new Promise((resolve)=>{const checkIntegrator=()=>{if(window.quantumChatIntegrator){resolve();}else{setTimeout(checkIntegrator,500);}};checkIntegrator();});}createDemoUI(){const existingPanel=document.getElementById('quantumDemoPanel');if(existingPanel){existingPanel.remove();}const demoPanel=document.createElement('div');demoPanel.id='quantumDemoPanel';demoPanel.style.cssText=` position: fixed;top: 20px;left: 20px;background: rgba(0,0,0,0.8);color: white;padding: 20px;border-radius: 10px;border: 2px solid #6b46c1;backdrop-filter: blur(10px);z-index: 1000;min-width: 300px;font-family: system-ui,-apple-system,sans-serif;`;demoPanel.innerHTML=` <h3 style="margin: 0 0 15px 0;color: #8b5cf6;">ğŸŒŒ é‡å­çƒæ¼”ç¤º</h3> <div id="demoStatus" style="margin-bottom: 15px;font-size: 14px;">å‡†å¤‡å¼€å§‹...</div> <div id="demoProgress" style="width: 100%;height: 4px;background: #333;border-radius: 2px;margin-bottom: 15px;"> <div id="demoProgressBar" style="width: 0%;height: 100%;background: linear-gradient(45deg,#6b46c1,#8b5cf6);border-radius: 2px;transition: width 0.3s ease;"></div> </div> <div style="display: flex;gap: 10px;"> <button id="demoPause" style="padding: 8px 16px;background: #f59e0b;border: none;border-radius: 5px;color: white;cursor: pointer;">æš‚åœ</button> <button id="demoStop" style="padding: 8px 16px;background: #ef4444;border: none;border-radius: 5px;color: white;cursor: pointer;">åœæ­¢</button> <button id="demoRestart" style="padding: 8px 16px;background: #10b981;border: none;border-radius: 5px;color: white;cursor: pointer;">é‡æ–°å¼€å§‹</button> </div> `;document.body.appendChild(demoPanel);document.getElementById('demoPause').onclick=()=> this.pauseDemo();document.getElementById('demoStop').onclick=()=> this.stopDemo();document.getElementById('demoRestart').onclick=()=> this.restartDemo();}async runDemoLoop(){while(this.isRunning && this.currentStep < this.demoSteps.length){const step=this.demoSteps[this.currentStep];console.log(`ğŸ­ æ¼”ç¤ºæ­¥éª¤ ${this.currentStep+1}: ${step.name}`);this.updateDemoUI(step);await this.executeStep(step);await this.sleep(step.duration);this.currentStep++;this.updateProgress();}if(this.isRunning){this.currentStep=0;await this.sleep(2000);await this.runDemoLoop();}}async executeStep(step){try{switch(step.action){case 'userMessageSent': if(window.quantumChatIntegrator){await window.quantumChatIntegrator.triggerUserMessageAnimation(step.message);}break;case 'aiThinking': if(window.quantumChatIntegrator){await window.quantumChatIntegrator.triggerAIThinkingAnimation();}break;case 'aiResponseReceived': if(window.quantumChatIntegrator){await window.quantumChatIntegrator.triggerAIResponseAnimation(step.message);}break;case 'chatError': if(window.quantumChatIntegrator){await window.quantumChatIntegrator.triggerErrorAnimation(new Error(step.message));}break;}}catch(error){console.error('æ¼”ç¤ºæ­¥éª¤æ‰§è¡Œå¤±è´¥:',error);}}updateDemoUI(step){const statusDiv=document.getElementById('demoStatus');if(statusDiv){statusDiv.innerHTML=` <div style="font-weight: bold;color: #8b5cf6;margin-bottom: 5px;">${step.name}</div> <div style="font-size: 12px;color: #ccc;">${step.description}</div> ${step.message ? `<div style="font-size: 12px;color: #10b981;margin-top: 5px;font-style: italic;">"${step.message}"</div>` : ''}`;}}updateProgress(){const progressBar=document.getElementById('demoProgressBar');if(progressBar){const progress=((this.currentStep)/this.demoSteps.length)*100;progressBar.style.width=`${progress}%`;}}pauseDemo(){this.isRunning=false;console.log('â¸ï¸ æ¼”ç¤ºå·²æš‚åœ');}stopDemo(){this.isRunning=false;this.currentStep=0;const panel=document.getElementById('quantumDemoPanel');if(panel){panel.remove();}console.log('â¹ï¸ æ¼”ç¤ºå·²åœæ­¢');}async restartDemo(){this.stopDemo();await this.sleep(500);await this.startDemo();}sleep(ms){return new Promise(resolve=> setTimeout(resolve,ms));}async triggerAnimation(action,message=''){const step=this.demoSteps.find(s=> s.action===action)||{action,message,duration: 2000,name: action,description: `æ‰‹åŠ¨è§¦å‘ ${action}åŠ¨ç”»`};console.log(`ğŸ¯ æ‰‹åŠ¨è§¦å‘åŠ¨ç”»: ${action}`);await this.executeStep(step);}}window.quantumChatDemo=new QuantumChatDemo();document.addEventListener('DOMContentLoaded',()=>{if(window.location.pathname==='/' || window.location.pathname.includes('index.html')){console.log('ğŸ  æ£€æµ‹åˆ°é¦–é¡µç¯å¢ƒï¼Œé‡å­çƒæ¼”ç¤ºå¯ç”¨');document.addEventListener('keydown',(e)=>{if(e.ctrlKey && e.shiftKey && e.key==='Q'){e.preventDefault();window.quantumChatDemo.startDemo();console.log('ğŸš€ å¿«æ·é”®å¯åŠ¨æ¼”ç¤º: Ctrl+Shift+Q');}});console.log('ğŸ¬ é‡å­çƒæ¼”ç¤ºå·²å°±ç»ªï¼Œä½¿ç”¨ window.quantumChatDemo.startDemo()æ‰‹åŠ¨å¯åŠ¨');console.log('âŒ¨ï¸ æˆ–ä½¿ç”¨å¿«æ·é”®: Ctrl+Shift+Q');}if(window.location.pathname.includes('chat.html')){console.log('ğŸ’¬ æ£€æµ‹åˆ°èŠå¤©é¡µé¢ç¯å¢ƒ');setTimeout(()=>{const statusIndicator=document.createElement('div');statusIndicator.className='quantum-status-indicator';statusIndicator.id='quantumStatusIndicator';statusIndicator.title='é‡å­çƒè¿æ¥çŠ¶æ€';document.body.appendChild(statusIndicator);if(window.quantumChatIntegrator){window.quantumChatIntegrator.on('connected',()=>{statusIndicator.className='quantum-status-indicator';});window.quantumChatIntegrator.on('disconnected',()=>{statusIndicator.className='quantum-status-indicator disconnected';});window.quantumChatIntegrator.on('quantumBallAnimation',(data)=>{if(data.eventType==='aiThinking'){statusIndicator.className='quantum-status-indicator thinking';setTimeout(()=>{statusIndicator.className='quantum-status-indicator';},3000);}});}},2000);}if(window.location.pathname.includes('quantum-test.html')){console.log('ğŸ§ª æ£€æµ‹åˆ°æµ‹è¯•é¡µé¢ç¯å¢ƒ');setTimeout(()=>{const testContainer=document.querySelector('.test-container');if(testContainer){const demoButton=document.createElement('button');demoButton.className='test-button';demoButton.textContent='å¼€å§‹å®Œæ•´æ¼”ç¤º';demoButton.style.background='linear-gradient(45deg,#10b981,#34d399)';demoButton.onclick=()=> window.quantumChatDemo.startDemo();const buttonContainer=testContainer.querySelector('.text-center');if(buttonContainer){buttonContainer.appendChild(document.createElement('br'));buttonContainer.appendChild(demoButton);}}},1000);}});if(typeof module !=='undefined' && module.exports){module.exports=QuantumChatDemo;}console.log('ğŸ­ é‡å­çƒèŠå¤©é›†æˆæ¼”ç¤ºæ¨¡å—å·²åŠ è½½');console.log('ğŸ’¡ ä½¿ç”¨ window.quantumChatDemo.startDemo()å¼€å§‹æ¼”ç¤º');console.log('âŒ¨ï¸ é¦–é¡µå¿«æ·é”®: Ctrl+Shift+Q');