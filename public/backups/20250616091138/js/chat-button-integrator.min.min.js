class ChatButtonIntegrator{constructor(){this.chatButtons=new Map();this.init();}init(){if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',()=>{this.integrateExistingButtons();});}else{this.integrateExistingButtons();}}integrateExistingButtons(){setTimeout(()=>{this.integrateChatButtons();},1000);}integrateChatButtons(){this.integrateQuantumChatButton();this.integrateAIAssistantButton();this.integrateOtherChatButtons();}integrateQuantumChatButton(){const floatingButton=document.getElementById('floating-chat-button');if(floatingButton && window.floatingButtonsManager){floatingButton.className='';floatingButton.style.cssText='';window.floatingButtonsManager.registerButton('quantum-chat',{element: floatingButton,preferredPosition: 'bottom-right-1',type: 'chat',priority: 5,title: 'é‡å­æ™ºèƒ½åŠ©æ‰‹',icon: 'fas fa-comments'});console.log('âœ… é‡å­èŠå¤©æŒ‰é’®å·²é›†æˆåˆ°ç®¡ç†å™¨');}}integrateAIAssistantButton(){const aiAssistantBtn=document.getElementById('aiAssistantBtn');if(aiAssistantBtn && window.floatingButtonsManager){const computedStyle=window.getComputedStyle(aiAssistantBtn);if(computedStyle.position==='fixed'){aiAssistantBtn.className='';aiAssistantBtn.style.cssText='';window.floatingButtonsManager.registerButton('ai-assistant',{element: aiAssistantBtn,preferredPosition: 'bottom-right-1',type: 'chat',priority: 4,title: 'AIæ™ºèƒ½åŠ©æ‰‹',icon: 'fas fa-robot'});console.log('âœ… AIåŠ©æ‰‹æŒ‰é’®å·²é›†æˆåˆ°ç®¡ç†å™¨');}}}integrateOtherChatButtons(){const chatToggleBtn=document.getElementById('chatToggleBtn');const chatButton=document.getElementById('chatButton');[chatToggleBtn,chatButton].forEach((btn,index)=>{if(btn && window.floatingButtonsManager){const computedStyle=window.getComputedStyle(btn);if(computedStyle.position==='fixed'){btn.className='';btn.style.cssText='';window.floatingButtonsManager.registerButton(`chat-${index}`,{element: btn,preferredPosition: 'bottom-right-1',type: 'chat',priority: 3-index,title: 'èŠå¤©åŠ©æ‰‹',icon: 'fas fa-comment-dots'});console.log(`âœ… èŠå¤©æŒ‰é’® ${index}å·²é›†æˆåˆ°ç®¡ç†å™¨`);}}});}createUnifiedChatButton(){if(this.chatButtons.size===0){const unifiedButton=document.createElement('button');unifiedButton.id='unified-chat-button';unifiedButton.innerHTML='<i class="fas fa-comments"></i>';document.body.appendChild(unifiedButton);if(window.floatingButtonsManager){window.floatingButtonsManager.registerButton('unified-chat',{element: unifiedButton,preferredPosition: 'bottom-right-1',type: 'chat',priority: 10,title: 'æ™ºèƒ½èŠå¤©åŠ©æ‰‹',icon: 'fas fa-comments',onClick: this.handleUnifiedChatClick.bind(this)});console.log('âœ… ç»Ÿä¸€èŠå¤©æŒ‰é’®å·²åˆ›å»º');}}}handleUnifiedChatClick(){const chatContainer=document.getElementById('chat-container');const chatWidget=document.getElementById('chatWidget');const aiChatContainer=document.getElementById('ai-chat-container');if(chatContainer){if(window.quantumChatIntegrator && typeof window.quantumChatIntegrator.showChatInterface==='function'){window.quantumChatIntegrator.showChatInterface();}}else if(chatWidget){chatWidget.classList.remove('hidden');}else if(aiChatContainer){if(window.aiChat && typeof window.aiChat.showChat==='function'){window.aiChat.showChat();}}else{this.createBasicChatInterface();}}createBasicChatInterface(){const chatInterface=document.createElement('div');chatInterface.id='basic-chat-interface';chatInterface.innerHTML=` <div class="fixed bottom-20 right-20 w-80 h-96 bg-white rounded-lg shadow-2xl border z-50"> <div class="bg-blue-600 text-white p-4 rounded-t-lg"> <div class="flex justify-between items-center"> <h3 class="font-semibold">æ™ºèƒ½åŠ©æ‰‹</h3> <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-white hover:text-gray-200"> <i class="fas fa-times"></i> </button> </div> </div> <div class="p-4 h-64 overflow-y-auto"> <div class="mb-4 p-3 bg-gray-100 rounded-lg"> æ‚¨å¥½ï¼æˆ‘æ˜¯AlingAi Proçš„æ™ºèƒ½åŠ©æ‰‹ã€‚æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ </div> </div> <div class="p-4 border-t"> <div class="flex gap-2"> <input type="text" placeholder="è¾“å…¥æ¶ˆæ¯..." class="flex-1 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"> <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"> å‘é€ </button> </div> </div> </div> `;document.body.appendChild(chatInterface);console.log('âœ… åŸºæœ¬èŠå¤©ç•Œé¢å·²åˆ›å»º');}}window.chatButtonIntegrator=new ChatButtonIntegrator();console.log('ğŸ’¬ èŠå¤©æŒ‰é’®é›†æˆç®¡ç†å™¨å·²åŠ è½½');