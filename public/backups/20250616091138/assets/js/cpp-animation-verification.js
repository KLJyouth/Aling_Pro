// C++åŠ¨ç”»éªŒè¯è„šæœ¬ (function() { console.log('ğŸ” å¼€å§‹C++åŠ¨ç”»éªŒè¯...'); // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½ function waitForPageLoad() { return new Promise((resolve) => { if (document.readyState === 'complete') { resolve(); } else { window.addEventListener('load', resolve); } }); } // æ£€æŸ¥å¿…è¦èµ„æº function checkResources() { const checks = { 'Three.js': typeof THREE !== 'undefined', 'CppCodeAnimationç±»': typeof CppCodeAnimation !== 'undefined', 'åŠ¨ç”»å®¹å™¨': document.getElementById('cpp-animation-container') !== null, 'CSSæ ·å¼': document.querySelector('link[href*="cpp-animation.css"]') !== null }; console.log('ğŸ“‹ èµ„æºæ£€æŸ¥ç»“æœ:'); for (const [name, status] of Object.entries(checks)) { console.log(`${status ? 'âœ…' : 'âŒ'} ${name}: ${status ? 'æ­£å¸¸' : 'ç¼ºå¤±'}`); } return Object.values(checks).every(status => status); } // éªŒè¯åŠ¨ç”»ç³»ç»Ÿ async function verifyAnimation() { await waitForPageLoad(); console.log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹éªŒè¯...'); const resourcesOK = checkResources(); if (!resourcesOK) { console.error('âŒ èµ„æºæ£€æŸ¥å¤±è´¥ï¼Œæ— æ³•åˆå§‹åŒ–åŠ¨ç”»'); return false; } const container = document.getElementById('cpp-animation-container'); if (!container) { console.error('âŒ åŠ¨ç”»å®¹å™¨æœªæ‰¾åˆ°'); return false; } try { // æ£€æŸ¥æ˜¯å¦å·²ç»åˆå§‹åŒ– if (window.cppAnimation) { console.log('âœ… åŠ¨ç”»ç³»ç»Ÿå·²è‡ªåŠ¨åˆå§‹åŒ–'); return true; } // æ‰‹åŠ¨åˆå§‹åŒ– console.log('ğŸ”§ æ‰‹åŠ¨åˆå§‹åŒ–åŠ¨ç”»ç³»ç»Ÿ...'); window.cppAnimation = new CppCodeAnimation('cpp-animation-container'); window.cppAnimation.addMouseInteraction(); console.log('âœ… C++åŠ¨ç”»ç³»ç»ŸéªŒè¯æˆåŠŸï¼'); console.log('ğŸ¯ åŠ¨ç”»ä½ç½®:', { å®¹å™¨: container.getBoundingClientRect(), é¡µé¢ä¸­çš„ä½ç½®: container.offsetTop + 'px from top' }); return true; } catch (error) { console.error('âŒ åŠ¨ç”»åˆå§‹åŒ–å¤±è´¥:', error); return false; } } // æ·»åŠ è°ƒè¯•åŠŸèƒ½ window.debugCppAnimation = { restart: () => { if (window.cppAnimation) { window.cppAnimation.restart(); console.log('ğŸ”„ åŠ¨ç”»å·²é‡å¯'); } }, check: verifyAnimation, info: () => { if (window.cppAnimation) { console.log('ğŸ“Š åŠ¨ç”»ä¿¡æ¯:', { performance: window.cppAnimation.performanceMode, reduceMotion: window.cppAnimation.reduceMotion, isTyping: window.cppAnimation.isTyping, currentLine: window.cppAnimation.currentLineIndex }); } } }; // è‡ªåŠ¨è¿è¡ŒéªŒè¯ verifyAnimation().then(success => { if (success) { console.log('ğŸ‰ C++åŠ¨ç”»é›†æˆéªŒè¯å®Œæˆï¼'); console.log('ğŸ’¡ è°ƒè¯•å‘½ä»¤: window.debugCppAnimation.restart(), window.debugCppAnimation.info()'); } else { console.error('ğŸ’¥ C++åŠ¨ç”»é›†æˆéªŒè¯å¤±è´¥ï¼'); } }); })(); 