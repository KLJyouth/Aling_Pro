<!DOCTYPE html> <html lang="zh-CN"> <head> <link rel="preload" href="/assets/css/main.css" as="style"> <link rel="preload" href="/assets/js/main.js" as="script"> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>浮动按钮系统测试 - AlingAi Pro</title> <link href="/assets/css/https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"> <script src="https://cdn.tailwindcss.com" async></script> <style> body { background: linear-gradient(135deg, #0f0f23 0%, #1a1a40 100%); min-height: 100vh; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; } </style> 
        <style>
            @media (max-width: 768px) {
                .container { width: 100%; padding: 0 15px; }
                .row { flex-direction: column; }
                .col { width: 100%; }
            }
            @media (max-width: 480px) {
                body { font-size: 14px; }
                h1 { font-size: 24px; }
                h2 { font-size: 20px; }
            }
        </style></head> <body> <div class="container mx-auto px-4 py-8"> <h1 class="text-3xl font-bold text-white mb-8 text-center"> 🎯 浮动按钮系统测试 </h1> <div class="grid md:grid-cols-2 gap-8"> <div class="bg-gray-800 p-6 rounded-lg"> <h2 class="text-xl text-white mb-4">📊 按钮状态监控</h2> <div id="buttonStatus" class="text-gray-300"> 正在初始化... </div> </div> <div class="bg-gray-800 p-6 rounded-lg"> <h2 class="text-xl text-white mb-4">🎛️ 控制面板</h2> <div class="space-y-3"> <button onclick="testFloatingButtons()" class="w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"> 测试所有按钮 </button> <button onclick="toggleAllButtons()" class="w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"> 切换所有按钮 </button> <button onclick="optimizeLayout()" class="w-full bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700"> 优化布局 </button> <button onclick="createTestButton()" class="w-full bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700"> 创建测试按钮 </button> </div> </div> </div> <div class="mt-8 bg-gray-800 p-6 rounded-lg"> <h2 class="text-xl text-white mb-4">📝 日志输出</h2> <div id="logOutput" class="bg-black p-4 rounded text-green-400 font-mono text-sm h-64 overflow-y-auto"> === 浮动按钮系统测试日志 ===<br> </div> </div> </div> <script src="/assets/js/assets/js/floating-buttons-manager.js" async></script> <script src="/assets/js/assets/js/social-customization.js" async></script> <script src="/assets/js/assets/js/realtime-performance-dashboard.js" async></script> <script src="/assets/js/assets/js/advanced-debug-console.js" async></script> <script src="/assets/js/assets/js/chat-button-integrator.js" async></script> <script src="/assets/js/assets/js/quantum-chat-integrator.js" async></script> <script src="/assets/js/assets/js/floating-buttons-diagnostic.js" async></script> <script src="/assets/js/assets/js/floating-buttons-test-runner.js" async></script> <script async> // 测试脚本 let testCounter = 0; function log(message) { const logDiv = document.getElementById('logOutput'); const timestamp = new Date().toLocaleTimeString(); logDiv.innerHTML += `[${timestamp}] ${message}<br>`; logDiv.scrollTop = logDiv.scrollHeight; } function updateButtonStatus() { const statusDiv = document.getElementById('buttonStatus'); if (window.floatingButtonsManager) { const status = window.floatingButtonsManager.getButtonsStatus(); statusDiv.innerHTML = ` <div class="space-y-2"> <div>注册按钮数量: <span class="font-bold text-blue-400">${status.totalButtons}</span></div> <div>可见按钮数量: <span class="font-bold text-green-400">${status.visibleButtons}</span></div> <div>隐藏按钮数量: <span class="font-bold text-red-400">${status.hiddenButtons}</span></div> <div class="mt-3"> <div class="text-sm">按钮列表:</div> ${status.buttons.map(btn => `<div class="text-xs ml-2">• ${btn.id} (${btn.position}) - ${btn.visible ? '可见' : '隐藏'}</div>` ).join('')} </div> </div> `; } else { statusDiv.innerHTML = '<div class="text-red-400">浮动按钮管理器未加载</div>'; } } function testFloatingButtons() { log('开始测试所有浮动按钮...'); if (!window.floatingButtonsManager) { log('❌ 浮动按钮管理器未找到'); return; } // 测试每个按钮的功能 const buttons = window.floatingButtonsManager.buttons; buttons.forEach((button, id) => { log(`✅ 测试按钮: ${id} (位置: ${button.position})`); // 模拟点击 if (button.element) { const event = new Event('click'); button.element.dispatchEvent(event); log(` → 点击事件已触发`); } }); updateButtonStatus(); log('✅ 所有按钮测试完成'); } function toggleAllButtons() { log('切换所有按钮显示状态...'); if (window.floatingButtonsManager) { window.floatingButtonsManager.toggleAllButtons(); log('✅ 按钮状态已切换'); updateButtonStatus(); } else { log('❌ 管理器未找到'); } } function optimizeLayout() { log('优化按钮布局...'); if (window.floatingButtonsManager) { window.floatingButtonsManager.optimizeLayout(); log('✅ 布局已优化'); updateButtonStatus(); } else { log('❌ 管理器未找到'); } } function createTestButton() { testCounter++; const testId = `test-${testCounter}`; log(`创建测试按钮: ${testId}`); const testButton = document.createElement('button'); testButton.innerHTML = `<i class="fas fa-flask"></i>`; testButton.title = `测试按钮 ${testCounter}`; document.body.appendChild(testButton); if (window.floatingButtonsManager) { window.floatingButtonsManager.registerButton(testId, { element: testButton, preferredPosition: 'bottom-right-3', type: 'test', priority: 1, title: `测试按钮 ${testCounter}`, icon: 'fas fa-flask', onClick: () => { log(`🧪 测试按钮 ${testCounter} 被点击`); } }); log(`✅ 测试按钮 ${testId} 已注册`); updateButtonStatus(); } else { log('❌ 管理器未找到'); } } // 页面加载完成后的初始化 document.addEventListener('DOMContentLoaded', () => { log('页面加载完成，开始初始化...'); // 等待所有系统加载 setTimeout(() => { log('检查浮动按钮管理器状态...'); if (window.floatingButtonsManager) { log('✅ 浮动按钮管理器已加载'); updateButtonStatus(); } else { log('❌ 浮动按钮管理器未加载'); } // 检查其他系统 if (window.socialCustomization) { log('✅ 社交自定义系统已加载'); } if (window.performanceDashboard) { log('✅ 性能仪表板已加载'); } if (window.debugConsole) { log('✅ 调试控制台已加载'); } if (window.chatButtonIntegrator) { log('✅ 聊天按钮集成器已加载'); } if (window.quantumChatIntegrator) { log('✅ 量子聊天集成器已加载'); } log('=== 初始化完成 ==='); }, 2000); }); // 定期更新状态 setInterval(updateButtonStatus, 3000); </script> </body> </html> 