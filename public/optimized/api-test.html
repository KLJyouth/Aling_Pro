<!DOCTYPE html> <html lang="zh-CN"> <head> <link rel="preload" href="/assets/css/main.css" as="style"> <link rel="preload" href="/assets/js/main.js" as="script"> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>AlingAi Pro - APIè¿æ¥æµ‹è¯•</title> <style> body { font-family: 'Microsoft YaHei', sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; } .container { max-width: 1200px; margin: 0 auto; background: rgba(255, 255, 255, 0.95); border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); } h1 { text-align: center; color: #333; margin-bottom: 30px; } .test-section { margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #667eea; } .test-title { font-size: 1.2rem; font-weight: 600; color: #333; margin-bottom: 15px; } .test-result { padding: 15px; border-radius: 8px; margin-top: 10px; font-family: 'Courier New', monospace; white-space: pre-wrap; max-height: 300px; overflow-y: auto; } .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; } .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; } .loading { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; } .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; margin-right: 10px; transition: transform 0.2s ease; } .btn:hover { transform: translateY(-2px); } .btn:disabled { background: #ccc; cursor: not-allowed; transform: none; } </style> 
        <style>
            @media (max-width: 768px) {
                .container { width: 100%; padding: 0 15px; }
                .row { flex-direction: column; }
                .col { width: 100%; }
            }
            @media (max-width: 480px) {
                body { font-size: 14px; }
                h1 { font-size: 24px; }
                h2 { font-size: 20px; }
            }
        </style></head> <body> <div class="container"> <h1>ğŸš€ AlingAi Pro APIè¿æ¥æµ‹è¯•</h1> <div class="test-section"> <div class="test-title">ğŸ“Š ç³»ç»Ÿç»Ÿè®¡æµ‹è¯•</div> <button class="btn" onclick="testStats()">æµ‹è¯•ç»Ÿè®¡æ¥å£</button> <div id="stats-result" class="test-result loading">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...</div> </div> <div class="test-section"> <div class="test-title">ğŸ‘¥ ç”¨æˆ·ç®¡ç†æµ‹è¯•</div> <button class="btn" onclick="testUsers()">æµ‹è¯•ç”¨æˆ·æ¥å£</button> <button class="btn" onclick="testEnterpriseUsers()">æµ‹è¯•ä¼ä¸šç”¨æˆ·</button> <div id="users-result" class="test-result loading">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...</div> </div> <div class="test-section"> <div class="test-title">ğŸ“‹ ç”³è¯·ç®¡ç†æµ‹è¯•</div> <button class="btn" onclick="testApplications()">æµ‹è¯•ç”³è¯·æ¥å£</button> <button class="btn" onclick="testPendingApplications()">æµ‹è¯•å¾…å®¡æ ¸ç”³è¯·</button> <div id="applications-result" class="test-result loading">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...</div> </div> <div class="test-section"> <div class="test-title">âš™ï¸ å®Œæ•´åŠŸèƒ½æµ‹è¯•</div> <button class="btn" onclick="runComprehensiveTest()">è¿è¡Œå®Œæ•´æµ‹è¯•</button> <div id="comprehensive-result" class="test-result loading">ç‚¹å‡»æŒ‰é’®å¼€å§‹å®Œæ•´æµ‹è¯•...</div> </div> </div> <script> const API_BASE_URL = 'http://localhost:8080/api/admin'; async function testApiEndpoint(endpoint, method = 'GET', data = null) { try { const options = { method: method, headers: { 'Content-Type': 'application/json', } }; if (data) { options.body = JSON.stringify(data); } const response = await fetch(`${API_BASE_URL}${endpoint}`, options); const result = await response.json(); return { success: response.ok && result.success, status: response.status, data: result }; } catch (error) { return { success: false, error: error.message }; } } async function testStats() { const resultDiv = document.getElementById('stats-result'); resultDiv.className = 'test-result loading'; resultDiv.textContent = 'æ­£åœ¨æµ‹è¯•ç»Ÿè®¡æ¥å£...'; const result = await testApiEndpoint('/stats'); if (result.success) { resultDiv.className = 'test-result success'; resultDiv.textContent = `âœ… ç»Ÿè®¡æ¥å£æµ‹è¯•æˆåŠŸï¼ ç»Ÿè®¡æ•°æ®ï¼š â€¢ æ€»ç”¨æˆ·æ•°: ${result.data.data.total_users} â€¢ ä¼ä¸šç”¨æˆ·: ${result.data.data.enterprise_users} â€¢ ä¸ªäººç”¨æˆ·: ${result.data.data.individual_users} â€¢ æ€»ç”³è¯·æ•°: ${result.data.data.total_applications} â€¢ å¾…å®¡æ ¸: ${result.data.data.pending_applications} â€¢ å·²é€šè¿‡: ${result.data.data.approved_applications} â€¢ æ€»APIè°ƒç”¨: ${result.data.data.total_api_calls} â€¢ æ€»Tokenæ•°: ${result.data.data.total_tokens}`; } else { resultDiv.className = 'test-result error'; resultDiv.textContent = `âŒ ç»Ÿè®¡æ¥å£æµ‹è¯•å¤±è´¥ï¼ é”™è¯¯ä¿¡æ¯: ${result.error || JSON.stringify(result.data, null, 2)}`; } } async function testUsers() { const resultDiv = document.getElementById('users-result'); resultDiv.className = 'test-result loading'; resultDiv.textContent = 'æ­£åœ¨æµ‹è¯•ç”¨æˆ·æ¥å£...'; const result = await testApiEndpoint('/users'); if (result.success) { resultDiv.className = 'test-result success'; const users = result.data.data; resultDiv.textContent = `âœ… ç”¨æˆ·æ¥å£æµ‹è¯•æˆåŠŸï¼ ç”¨æˆ·åˆ—è¡¨ (${users.length} ä¸ªç”¨æˆ·): ${users.map(user => `â€¢ ${user.username} (${user.email}) - ${user.user_type || 'individual'} - ${user.status}` ).join('\n')}`; } else { resultDiv.className = 'test-result error'; resultDiv.textContent = `âŒ ç”¨æˆ·æ¥å£æµ‹è¯•å¤±è´¥ï¼ é”™è¯¯ä¿¡æ¯: ${result.error || JSON.stringify(result.data, null, 2)}`; } } async function testEnterpriseUsers() { const resultDiv = document.getElementById('users-result'); resultDiv.className = 'test-result loading'; resultDiv.textContent = 'æ­£åœ¨æµ‹è¯•ä¼ä¸šç”¨æˆ·æ¥å£...'; const result = await testApiEndpoint('/users?type=enterprise'); if (result.success) { resultDiv.className = 'test-result success'; const users = result.data.data; resultDiv.textContent = `âœ… ä¼ä¸šç”¨æˆ·æ¥å£æµ‹è¯•æˆåŠŸï¼ ä¼ä¸šç”¨æˆ·åˆ—è¡¨ (${users.length} ä¸ªç”¨æˆ·): ${users.map(user => `â€¢ ${user.username} (${user.email}) - ${user.status}` ).join('\n')}`; } else { resultDiv.className = 'test-result error'; resultDiv.textContent = `âŒ ä¼ä¸šç”¨æˆ·æ¥å£æµ‹è¯•å¤±è´¥ï¼ é”™è¯¯ä¿¡æ¯: ${result.error || JSON.stringify(result.data, null, 2)}`; } } async function testApplications() { const resultDiv = document.getElementById('applications-result'); resultDiv.className = 'test-result loading'; resultDiv.textContent = 'æ­£åœ¨æµ‹è¯•ç”³è¯·æ¥å£...'; const result = await testApiEndpoint('/applications'); if (result.success) { resultDiv.className = 'test-result success'; const applications = result.data.data; resultDiv.textContent = `âœ… ç”³è¯·æ¥å£æµ‹è¯•æˆåŠŸï¼ ç”³è¯·åˆ—è¡¨ (${applications.length} ä¸ªç”³è¯·): ${applications.map(app => `â€¢ ${app.company_name} - ${app.contact_person} - ${app.status}` ).join('\n')}`; } else { resultDiv.className = 'test-result error'; resultDiv.textContent = `âŒ ç”³è¯·æ¥å£æµ‹è¯•å¤±è´¥ï¼ é”™è¯¯ä¿¡æ¯: ${result.error || JSON.stringify(result.data, null, 2)}`; } } async function testPendingApplications() { const resultDiv = document.getElementById('applications-result'); resultDiv.className = 'test-result loading'; resultDiv.textContent = 'æ­£åœ¨æµ‹è¯•å¾…å®¡æ ¸ç”³è¯·æ¥å£...'; const result = await testApiEndpoint('/applications?status=pending'); if (result.success) { resultDiv.className = 'test-result success'; const applications = result.data.data; resultDiv.textContent = `âœ… å¾…å®¡æ ¸ç”³è¯·æ¥å£æµ‹è¯•æˆåŠŸï¼ å¾…å®¡æ ¸ç”³è¯· (${applications.length} ä¸ª): ${applications.map(app => `â€¢ ${app.company_name} - ${app.contact_person} - ç”³è¯·æ—¶é—´: ${app.created_at}` ).join('\n')}`; } else { resultDiv.className = 'test-result error'; resultDiv.textContent = `âŒ å¾…å®¡æ ¸ç”³è¯·æ¥å£æµ‹è¯•å¤±è´¥ï¼ é”™è¯¯ä¿¡æ¯: ${result.error || JSON.stringify(result.data, null, 2)}`; } } async function runComprehensiveTest() { const resultDiv = document.getElementById('comprehensive-result'); resultDiv.className = 'test-result loading'; resultDiv.textContent = 'æ­£åœ¨è¿è¡Œå®Œæ•´åŠŸèƒ½æµ‹è¯•...'; const tests = [ { name: 'ç³»ç»Ÿç»Ÿè®¡', endpoint: '/stats' }, { name: 'ç”¨æˆ·åˆ—è¡¨', endpoint: '/users' }, { name: 'ä¼ä¸šç”¨æˆ·', endpoint: '/users?type=enterprise' }, { name: 'ç”³è¯·åˆ—è¡¨', endpoint: '/applications' }, { name: 'å¾…å®¡æ ¸ç”³è¯·', endpoint: '/applications?status=pending' }, { name: 'ç”¨æˆ·è¯¦æƒ…', endpoint: '/users/details?userId=2' }, { name: 'ä¼ä¸šé…ç½®', endpoint: '/enterprise-config?userId=2' } ]; const results = []; for (const test of tests) { const result = await testApiEndpoint(test.endpoint); results.push({ name: test.name, success: result.success, data: result.data }); } const successCount = results.filter(r => r.success).length; const totalCount = results.length; if (successCount === totalCount) { resultDiv.className = 'test-result success'; resultDiv.textContent = `ğŸ‰ å®Œæ•´åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼ æµ‹è¯•ç»“æœ: ${successCount}/${totalCount} ä¸ªæ¥å£æ­£å¸¸ è¯¦ç»†ç»“æœ: ${results.map(r => `${r.success ? 'âœ…' : 'âŒ'} ${r.name}` ).join('\n')}`; } else { resultDiv.className = 'test-result error'; resultDiv.textContent = `âš ï¸ éƒ¨åˆ†åŠŸèƒ½æµ‹è¯•å¤±è´¥ æµ‹è¯•ç»“æœ: ${successCount}/${totalCount} ä¸ªæ¥å£æ­£å¸¸ è¯¦ç»†ç»“æœ: ${results.map(r => `${r.success ? 'âœ…' : 'âŒ'} ${r.name}${!r.success ? ' - å¤±è´¥' : ''}` ).join('\n')}`; } } // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡ŒåŸºç¡€æµ‹è¯• window.onload = function() { setTimeout(() => { testStats(); }, 1000); }; </script> </body> </html> 