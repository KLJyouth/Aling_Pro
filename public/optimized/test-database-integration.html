<!DOCTYPE html> <html lang="zh-CN"> <head> <link rel="preload" href="/assets/css/main.css" as="style"> <link rel="preload" href="/assets/js/main.js" as="script"> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>æ•°æ®åº“é›†æˆæµ‹è¯• - AlingAi Pro</title> <style> body { font-family: Arial, sans-serif; background: #1a1a1a; color: #fff; padding: 20px; margin: 0; } .container { max-width: 800px; margin: 0 auto; } .test-section { background: #2a2a2a; border-radius: 8px; padding: 20px; margin-bottom: 20px; } .test-button { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; transition: all 0.3s ease; } .test-button:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); } .test-result { background: #333; border-radius: 5px; padding: 10px; margin-top: 10px; font-family: monospace; white-space: pre-wrap; } .success { color: #4CAF50; } .error { color: #f44336; } .warning { color: #ff9800; } .status { padding: 10px; border-radius: 5px; margin: 10px 0; } .status.authenticated { background: rgba(76, 175, 80, 0.2); border: 1px solid #4CAF50; } .status.guest { background: rgba(255, 152, 0, 0.2); border: 1px solid #ff9800; } </style> 
        <style>
            @media (max-width: 768px) {
                .container { width: 100%; padding: 0 15px; }
                .row { flex-direction: column; }
                .col { width: 100%; }
            }
            @media (max-width: 480px) {
                body { font-size: 14px; }
                h1 { font-size: 24px; }
                h2 { font-size: 20px; }
            }
        </style></head> <body> <div class="container"> <h1>ğŸ“Š AlingAi Pro æ•°æ®åº“é›†æˆæµ‹è¯•</h1> <div class="test-section"> <h2>ğŸ” è®¤è¯çŠ¶æ€æ£€æŸ¥</h2> <button class="test-button" onclick="testAuthentication()">æ£€æŸ¥è®¤è¯çŠ¶æ€</button> <div id="auth-status"></div> </div> <div class="test-section"> <h2>ğŸ’¬ èŠå¤©ç³»ç»Ÿæµ‹è¯•</h2> <button class="test-button" onclick="testChatSave()">æµ‹è¯•ä¿å­˜èŠå¤©è®°å½•</button> <button class="test-button" onclick="testChatLoad()">æµ‹è¯•åŠ è½½èŠå¤©è®°å½•</button> <button class="test-button" onclick="testChatClear()">æµ‹è¯•æ¸…ç©ºèŠå¤©è®°å½•</button> <div id="chat-test-result" class="test-result"></div> </div> <div class="test-section"> <h2>ğŸ  é¦–é¡µèŠå¤©ç»„ä»¶æµ‹è¯•</h2> <button class="test-button" onclick="testHomepageChat()">æµ‹è¯•é¦–é¡µèŠå¤©åŠŸèƒ½</button> <div id="homepage-test-result" class="test-result"></div> </div> <div class="test-section"> <h2>âš¡ é‡å­èŠå¤©é›†æˆå™¨æµ‹è¯•</h2> <button class="test-button" onclick="testQuantumIntegrator()">æµ‹è¯•é‡å­èŠå¤©é›†æˆå™¨</button> <div id="quantum-test-result" class="test-result"></div> </div> <div class="test-section"> <h2>ğŸ”„ æ•°æ®åŒæ­¥æµ‹è¯•</h2> <button class="test-button" onclick="testDataSync()">æµ‹è¯•æœ¬åœ°åˆ°æœåŠ¡å™¨åŒæ­¥</button> <div id="sync-test-result" class="test-result"></div> </div> </div> <script src="/assets/js/assets/js/homepage-ai-chat.js"></script> <script src="/assets/js/assets/js/components/chat-component.js"></script> <script src="/assets/js/assets/js/components/enhanced-chat-component.js"></script> <script src="/assets/js/assets/js/chat/core.js"></script> <script src="/assets/js/assets/js/quantum-chat-integrator.js"></script> <script> // æµ‹è¯•è®¤è¯çŠ¶æ€ async function testAuthentication() { const statusDiv = document.getElementById('auth-status'); statusDiv.innerHTML = 'æ£€æŸ¥ä¸­...'; try { const response = await fetch('http://localhost:3001/api/v1/auth/check', { method: 'GET', headers: { 'Content-Type': 'application/json', 'X-Requested-With': 'XMLHttpRequest' } }); if (response.ok) { const result = await response.json(); const isAuthenticated = result.success && result.data?.authenticated; statusDiv.innerHTML = ` <div class="status ${isAuthenticated ? 'authenticated' : 'guest'}"> <strong>è®¤è¯çŠ¶æ€:</strong> ${isAuthenticated ? 'âœ… å·²è®¤è¯ç”¨æˆ·' : 'ğŸ‘¤ è®¿å®¢ç”¨æˆ·'}<br> <strong>å­˜å‚¨æ¨¡å¼:</strong> ${isAuthenticated ? 'API + localStorage å¤‡ä»½' : 'localStorage ä¸»è¦å­˜å‚¨'}<br> <strong>å“åº”çŠ¶æ€:</strong> ${response.status}<br> <strong>å“åº”æ•°æ®:</strong> ${JSON.stringify(result, null, 2)} </div> `; } else { throw new Error(`HTTP ${response.status}`); } } catch (error) { statusDiv.innerHTML = ` <div class="status guest"> <strong>è®¤è¯çŠ¶æ€:</strong> âŒ æ— æ³•è¿æ¥åˆ°è®¤è¯æœåŠ¡<br> <strong>å­˜å‚¨æ¨¡å¼:</strong> localStorage ç¦»çº¿æ¨¡å¼<br> <strong>é”™è¯¯ä¿¡æ¯:</strong> ${error.message} </div> `; } } // æµ‹è¯•èŠå¤©ä¿å­˜ async function testChatSave() { const resultDiv = document.getElementById('chat-test-result'); resultDiv.innerHTML = 'æµ‹è¯•èŠå¤©è®°å½•ä¿å­˜...\n'; try { // æµ‹è¯•æ•°æ® const testMessage = { id: Date.now(), type: 'user', content: 'è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯', timestamp: new Date().toISOString() }; // å¦‚æœå­˜åœ¨èŠå¤©æ ¸å¿ƒç±»ï¼Œä½¿ç”¨å®ƒ if (typeof ChatCore !== 'undefined') { const chatCore = new ChatCore(); await chatCore.saveMessage(testMessage); resultDiv.innerHTML += 'âœ… ChatCore ä¿å­˜æˆåŠŸ\n'; } // å¦‚æœå­˜åœ¨é¦–é¡µèŠå¤©ç±»ï¼Œä½¿ç”¨å®ƒ if (typeof HomepageAIChat !== 'undefined') { const homepageChat = new HomepageAIChat(); const testHistory = [testMessage]; await homepageChat.saveChatToStorage(testHistory); resultDiv.innerHTML += 'âœ… HomepageAIChat ä¿å­˜æˆåŠŸ\n'; } resultDiv.innerHTML += '\nâœ… èŠå¤©è®°å½•ä¿å­˜æµ‹è¯•å®Œæˆ'; } catch (error) { resultDiv.innerHTML += `\nâŒ ä¿å­˜æµ‹è¯•å¤±è´¥: ${error.message}`; } } // æµ‹è¯•èŠå¤©åŠ è½½ async function testChatLoad() { const resultDiv = document.getElementById('chat-test-result'); resultDiv.innerHTML = 'æµ‹è¯•èŠå¤©è®°å½•åŠ è½½...\n'; try { // å¦‚æœå­˜åœ¨èŠå¤©æ ¸å¿ƒç±»ï¼Œä½¿ç”¨å®ƒ if (typeof ChatCore !== 'undefined') { const chatCore = new ChatCore(); const history = await chatCore.loadChatHistory(); resultDiv.innerHTML += `âœ… ChatCore åŠ è½½æˆåŠŸï¼Œå†å²è®°å½•æ•°é‡: ${history.length}\n`; } // å¦‚æœå­˜åœ¨é¦–é¡µèŠå¤©ç±»ï¼Œä½¿ç”¨å®ƒ if (typeof HomepageAIChat !== 'undefined') { const homepageChat = new HomepageAIChat(); const history = await homepageChat.loadChatHistoryFromStorage(); resultDiv.innerHTML += `âœ… HomepageAIChat åŠ è½½æˆåŠŸï¼Œå†å²è®°å½•æ•°é‡: ${history.length}\n`; } resultDiv.innerHTML += '\nâœ… èŠå¤©è®°å½•åŠ è½½æµ‹è¯•å®Œæˆ'; } catch (error) { resultDiv.innerHTML += `\nâŒ åŠ è½½æµ‹è¯•å¤±è´¥: ${error.message}`; } } // æµ‹è¯•èŠå¤©æ¸…ç©º async function testChatClear() { const resultDiv = document.getElementById('chat-test-result'); resultDiv.innerHTML = 'æµ‹è¯•æ¸…ç©ºèŠå¤©è®°å½•...\n'; try { let clearedCount = 0; // å¦‚æœå­˜åœ¨èŠå¤©æ ¸å¿ƒç±»ï¼Œä½¿ç”¨å®ƒ if (typeof ChatCore !== 'undefined') { const chatCore = new ChatCore(); await chatCore.clearHistory(); clearedCount++; resultDiv.innerHTML += 'âœ… ChatCore æ¸…ç©ºæˆåŠŸ\n'; } // å¦‚æœå­˜åœ¨é¦–é¡µèŠå¤©ç±»ï¼Œä½¿ç”¨å®ƒ if (typeof HomepageAIChat !== 'undefined') { const homepageChat = new HomepageAIChat(); await homepageChat.clearHistory(); clearedCount++; resultDiv.innerHTML += 'âœ… HomepageAIChat æ¸…ç©ºæˆåŠŸ\n'; } resultDiv.innerHTML += `\nâœ… èŠå¤©è®°å½•æ¸…ç©ºæµ‹è¯•å®Œæˆï¼Œå…±æ¸…ç©º ${clearedCount} ä¸ªç»„ä»¶`; } catch (error) { resultDiv.innerHTML += `\nâŒ æ¸…ç©ºæµ‹è¯•å¤±è´¥: ${error.message}`; } } // æµ‹è¯•é¦–é¡µèŠå¤© async function testHomepageChat() { const resultDiv = document.getElementById('homepage-test-result'); resultDiv.innerHTML = 'æµ‹è¯•é¦–é¡µèŠå¤©ç»„ä»¶...\n'; try { if (typeof HomepageAIChat !== 'undefined') { // åˆ›å»ºå®ä¾‹ä½†ä¸ç»‘å®šDOM const homepageChat = new HomepageAIChat(); // æµ‹è¯•è®¤è¯æ£€æŸ¥ const isAuth = await homepageChat.checkAuthentication(); resultDiv.innerHTML += `âœ… è®¤è¯æ£€æŸ¥: ${isAuth ? 'å·²è®¤è¯' : 'è®¿å®¢æ¨¡å¼'}\n`; // æµ‹è¯•AIå“åº”ç”Ÿæˆ const testResponse = await homepageChat.getAIResponse('ä½ å¥½'); resultDiv.innerHTML += `âœ… AIå“åº”ç”Ÿæˆ: ${testResponse.substring(0, 50)}...\n`; resultDiv.innerHTML += '\nâœ… é¦–é¡µèŠå¤©ç»„ä»¶æµ‹è¯•å®Œæˆ'; } else { throw new Error('HomepageAIChat ç±»æœªæ‰¾åˆ°'); } } catch (error) { resultDiv.innerHTML += `\nâŒ é¦–é¡µèŠå¤©æµ‹è¯•å¤±è´¥: ${error.message}`; } } // æµ‹è¯•é‡å­èŠå¤©é›†æˆå™¨ async function testQuantumIntegrator() { const resultDiv = document.getElementById('quantum-test-result'); resultDiv.innerHTML = 'æµ‹è¯•é‡å­èŠå¤©é›†æˆå™¨...\n'; try { if (typeof QuantumChatIntegrator !== 'undefined') { const integrator = new QuantumChatIntegrator(); // æµ‹è¯•è®¤è¯æ£€æŸ¥ const isAuth = await integrator.checkAuthentication(); resultDiv.innerHTML += `âœ… è®¤è¯æ£€æŸ¥: ${isAuth ? 'å·²è®¤è¯' : 'è®¿å®¢æ¨¡å¼'}\n`; resultDiv.innerHTML += 'âœ… é‡å­èŠå¤©é›†æˆå™¨å®ä¾‹åŒ–æˆåŠŸ\n'; resultDiv.innerHTML += '\nâœ… é‡å­èŠå¤©é›†æˆå™¨æµ‹è¯•å®Œæˆ'; } else { throw new Error('QuantumChatIntegrator ç±»æœªæ‰¾åˆ°'); } } catch (error) { resultDiv.innerHTML += `\nâŒ é‡å­èŠå¤©é›†æˆå™¨æµ‹è¯•å¤±è´¥: ${error.message}`; } } // æµ‹è¯•æ•°æ®åŒæ­¥ async function testDataSync() { const resultDiv = document.getElementById('sync-test-result'); resultDiv.innerHTML = 'æµ‹è¯•æ•°æ®åŒæ­¥åŠŸèƒ½...\n'; try { if (typeof ChatCore !== 'undefined') { const chatCore = new ChatCore(); // æ£€æŸ¥æ˜¯å¦æœ‰åŒæ­¥æ–¹æ³• if (typeof chatCore.syncToDatabase === 'function') { const syncResult = await chatCore.syncToDatabase(); resultDiv.innerHTML += `âœ… æ•°æ®åŒæ­¥å®Œæˆ: ${syncResult ? 'æˆåŠŸ' : 'æ— æ•°æ®éœ€è¦åŒæ­¥'}\n`; } else { resultDiv.innerHTML += 'âš ï¸ åŒæ­¥æ–¹æ³•ä¸å­˜åœ¨ï¼Œå¯èƒ½è¿˜æœªå®ç°\n'; } resultDiv.innerHTML += '\nâœ… æ•°æ®åŒæ­¥æµ‹è¯•å®Œæˆ'; } else { throw new Error('ChatCore ç±»æœªæ‰¾åˆ°'); } } catch (error) { resultDiv.innerHTML += `\nâŒ æ•°æ®åŒæ­¥æµ‹è¯•å¤±è´¥: ${error.message}`; } } // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥è®¤è¯çŠ¶æ€ document.addEventListener('DOMContentLoaded', () => { testAuthentication(); }); </script> </body> </html> 