<!DOCTYPE html> <html lang="zh-CN"> <head> <link rel="preload" href="/assets/css/main.css" as="style"> <link rel="preload" href="/assets/js/main.js" as="script"> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>å‰ç«¯APIé›†æˆæµ‹è¯•</title> <style> body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 20px; background: #f5f5f5; } .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); } .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; } .success { background: #d4edda; border-color: #c3e6cb; color: #155724; } .error { background: #f8d7da; border-color: #f5c6cb; color: #721c24; } .info { background: #d1ecf1; border-color: #bee5eb; color: #0c5460; } button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; } button:hover { background: #0056b3; } .result { margin: 10px 0; padding: 10px; border-radius: 4px; background: #f8f9fa; border: 1px solid #e9ecef; } pre { background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; font-size: 12px; } </style> 
        <style>
            @media (max-width: 768px) {
                .container { width: 100%; padding: 0 15px; }
                .row { flex-direction: column; }
                .col { width: 100%; }
            }
            @media (max-width: 480px) {
                body { font-size: 14px; }
                h1 { font-size: 24px; }
                h2 { font-size: 20px; }
            }
        </style></head> <body> <div class="container"> <h1>ğŸ”— å‰ç«¯-åç«¯APIé›†æˆæµ‹è¯•</h1> <p class="info">æµ‹è¯•å‰ç«¯JavaScriptèƒ½å¦æ­£ç¡®è°ƒç”¨åç«¯PHP APIç«¯ç‚¹</p> <div class="test-section"> <h3>ğŸ“¡ å†å²è®°å½•APIæµ‹è¯•</h3> <button onclick="testHistorySessions()">æµ‹è¯•è·å–å†å²ä¼šè¯</button> <button onclick="testHistoryMessages()">æµ‹è¯•è·å–å†å²æ¶ˆæ¯</button> <button onclick="testSaveHistory()">æµ‹è¯•ä¿å­˜å†å²è®°å½•</button> <div id="historyResults"></div> </div> <div class="test-section"> <h3>ğŸ” è®¤è¯APIæµ‹è¯•</h3> <button onclick="testAuth()">æµ‹è¯•è®¤è¯ç«¯ç‚¹</button> <div id="authResults"></div> </div> <div class="test-section"> <h3>ğŸ’¬ èŠå¤©APIæµ‹è¯•</h3> <button onclick="testChat()">æµ‹è¯•èŠå¤©ç«¯ç‚¹</button> <div id="chatResults"></div> </div> <div class="test-section"> <h3>ğŸ“Š æµ‹è¯•æ€»ç»“</h3> <div id="summary" class="info">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•...</div> </div> </div> <script src="/assets/js/assets/js/apiConfig.js"></script> <script> let testResults = []; async function makeApiCall(url, options = {}) { try { const response = await fetch(url, { headers: { 'Content-Type': 'application/json', ...options.headers }, ...options }); const data = await response.json(); return { success: response.ok, status: response.status, data: data }; } catch (error) { return { success: false, status: 0, error: error.message }; } } async function testHistorySessions() { const result = await makeApiCall(API_ENDPOINTS.HISTORY_SESSIONS); displayResult('historyResults', 'è·å–å†å²ä¼šè¯', result); testResults.push({name: 'History Sessions', success: result.success}); updateSummary(); } async function testHistoryMessages() { const result = await makeApiCall(API_ENDPOINTS.HISTORY_MESSAGES); displayResult('historyResults', 'è·å–å†å²æ¶ˆæ¯', result); testResults.push({name: 'History Messages', success: result.success}); updateSummary(); } async function testSaveHistory() { const testData = { session_id: 'test_session_' + Date.now(), title: 'å‰ç«¯æµ‹è¯•å¯¹è¯', messages: [ {type: 'user', content: 'å‰ç«¯æµ‹è¯•æ¶ˆæ¯', timestamp: new Date().toISOString()}, {type: 'assistant', content: 'åç«¯å“åº”æµ‹è¯•', timestamp: new Date().toISOString()} ] }; const result = await makeApiCall(API_ENDPOINTS.SAVE_HISTORY, { method: 'POST', body: JSON.stringify(testData) }); displayResult('historyResults', 'ä¿å­˜å†å²è®°å½•', result); testResults.push({name: 'Save History', success: result.success}); updateSummary(); } async function testAuth() { const result = await makeApiCall(API_ENDPOINTS.LOGIN.replace('/login', '/test')); displayResult('authResults', 'è®¤è¯APIæµ‹è¯•', result); testResults.push({name: 'Auth Test', success: result.success}); updateSummary(); } async function testChat() { const result = await makeApiCall(API_ENDPOINTS.CHAT_DEEPSEEK.replace('/chat', '/test')); displayResult('chatResults', 'èŠå¤©APIæµ‹è¯•', result); testResults.push({name: 'Chat Test', success: result.success}); updateSummary(); } function displayResult(containerId, testName, result) { const container = document.getElementById(containerId); const resultDiv = document.createElement('div'); resultDiv.className = result.success ? 'result success' : 'result error'; let content = `<strong>${testName}</strong><br>`; content += `çŠ¶æ€: ${result.success ? 'âœ… æˆåŠŸ' : 'âŒ å¤±è´¥'}<br>`; content += `HTTPçŠ¶æ€ç : ${result.status}<br>`; if (result.data) { content += `<details><summary>å“åº”æ•°æ®</summary><pre>${JSON.stringify(result.data, null, 2)}</pre></details>`; } if (result.error) { content += `é”™è¯¯: ${result.error}<br>`; } resultDiv.innerHTML = content; container.appendChild(resultDiv); } function updateSummary() { const total = testResults.length; const successful = testResults.filter(r => r.success).length; const failed = total - successful; let summaryHtml = `<h4>ğŸ“Š æµ‹è¯•ç»Ÿè®¡</h4>`; summaryHtml += `æ€»æµ‹è¯•æ•°: ${total} | âœ… æˆåŠŸ: ${successful} | âŒ å¤±è´¥: ${failed}<br><br>`; if (total > 0) { summaryHtml += `<strong>æµ‹è¯•è¯¦æƒ…:</strong><br>`; testResults.forEach(test => { summaryHtml += `${test.success ? 'âœ…' : 'âŒ'} ${test.name}<br>`; }); } if (total > 0 && failed === 0) { summaryHtml += `<br><div class="success">ğŸ‰ æ‰€æœ‰APIæµ‹è¯•é€šè¿‡ï¼å‰ç«¯-åç«¯é›†æˆæˆåŠŸï¼</div>`; } document.getElementById('summary').innerHTML = summaryHtml; } // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºAPIé…ç½®ä¿¡æ¯ window.onload = function() { console.log('APIé…ç½®åŠ è½½å®Œæˆ:', API_ENDPOINTS); console.log('APIåŸºç¡€URL:', API_BASE_URL); } </script> </body> </html> 