<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AlingAi Pro - AI助手，您的智能对话伙伴">
    <meta name="keywords" content="AI, 助手, 聊天, 智能对话, 自然语言处理">
    <title>AlingAi Pro - AI助手</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon">
    
    <!-- 核心CSS -->
    <link rel="stylesheet" href="/assets/css/unified-styles.css">
    
    <!-- 字体库 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap">
    
    <!-- FontAwesome 图标 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'quantum-primary': '#4F46E5',
                        'quantum-secondary': '#8B5CF6',
                        'quantum-accent': '#06B6D4',
                        'quantum-dark': '#0F172A'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>
    
    <!-- 代码高亮库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>
</head>

<body class="bg-gradient-to-b from-quantum-dark to-slate-900 text-white min-h-screen">
    <!-- 量子粒子背景 -->
    <div id="quantum-particles" class="fixed inset-0 -z-10 pointer-events-none opacity-30"></div>
    
    <!-- 顶部导航栏 -->
    <nav class="fixed top-0 left-0 right-0 z-40 bg-black/40 backdrop-blur-xl border-b border-quantum-primary/20">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- 侧边栏切换按钮 - 移动端 -->
                <button id="toggleSidebar" class="lg:hidden text-white p-2">
                    <i class="fas fa-bars"></i>
                </button>
                
                <!-- Logo - 仅在移动端显示 -->
                <div class="lg:hidden flex items-center space-x-2">
                    <div class="w-8 h-8 bg-gradient-to-br from-quantum-primary to-quantum-accent rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">A</span>
                    </div>
                    <span class="text-lg font-bold">AlingAi <span class="text-quantum-accent">Pro</span></span>
                </div>
                
                <!-- 搜索栏 -->
                <div class="hidden md:flex items-center flex-1 max-w-xl mx-4">
                    <div class="relative w-full">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                        <input type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-lg bg-black/30 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-quantum-accent focus:border-transparent" placeholder="搜索命令、文档或API...">
                        <div class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 text-xs">
                            <span>Ctrl+K</span>
                        </div>
                    </div>
                </div>
                
                <!-- 右侧工具栏 -->
                <div class="flex items-center space-x-4">
                    <!-- 移动端搜索按钮 -->
                    <button class="md:hidden text-white">
                        <i class="fas fa-search"></i>
                    </button>
                    
                    <!-- 通知 -->
                    <div class="relative">
                        <button class="text-white relative">
                            <i class="fas fa-bell"></i>
                            <span class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                        </button>
                    </div>
                    
                    <!-- 用户菜单 -->
                    <div class="relative">
                        <button id="userMenuBtn" class="flex items-center space-x-2 text-white">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center">
                                <span class="font-medium text-sm">JD</span>
                            </div>
                            <span class="hidden md:inline-block text-sm font-medium">John Doe</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        
                        <!-- 用户下拉菜单 -->
                        <div id="userMenu" class="absolute right-0 mt-2 w-48 bg-quantum-dark border border-gray-700 rounded-lg shadow-lg py-1 hidden z-50">
                            <a href="/profile.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800">
                                <i class="fas fa-user mr-2"></i> 个人资料
                            </a>
                            <a href="/settings.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800">
                                <i class="fas fa-cog mr-2"></i> 设置
                            </a>
                            <a href="/api-keys.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800">
                                <i class="fas fa-key mr-2"></i> API密钥
                            </a>
                            <a href="/billing.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800">
                                <i class="fas fa-credit-card mr-2"></i> 账单与订阅
                            </a>
                            <div class="border-t border-gray-700 my-1"></div>
                            <a href="/logout.php" class="block px-4 py-2 text-sm text-red-400 hover:bg-gray-800">
                                <i class="fas fa-sign-out-alt mr-2"></i> 退出登录
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- 主要内容区 -->
    <div class="flex h-screen pt-16">
        <!-- 侧边栏 -->
        <aside id="sidebar" class="sidebar fixed inset-y-0 left-0 z-30 w-64 transform transition-transform duration-300 lg:translate-x-0 lg:relative lg:z-0 pt-16 bg-black/40 backdrop-blur-xl border-r border-quantum-primary/20">
            <!-- Logo -->
            <div class="hidden lg:flex items-center space-x-2 px-6 py-5 border-b border-gray-800">
                <div class="w-9 h-9 bg-gradient-to-br from-quantum-primary to-quantum-accent rounded-lg flex items-center justify-center">
                    <span class="text-white font-bold text-xl">A</span>
                </div>
                <span class="text-xl font-bold">AlingAi <span class="text-quantum-accent">Pro</span></span>
            </div>
            
            <!-- 导航菜单 -->
            <nav class="mt-5 px-4">
                <div class="space-y-1">
                    <!-- 仪表板 -->
                    <a href="/unified-dashboard.html" class="sidebar-item" data-section="overview">
                        <i class="fas fa-tachometer-alt mr-3 w-5 text-center"></i>
                        <span>仪表板概览</span>
                    </a>
                    
                    <!-- AI助手 -->
                    <a href="#" class="sidebar-item active" data-section="assistant">
                        <i class="fas fa-robot mr-3 w-5 text-center"></i>
                        <span>AI助手</span>
                    </a>
                    
                    <!-- API管理 -->
                    <a href="#" class="sidebar-item" data-section="api">
                        <i class="fas fa-code mr-3 w-5 text-center"></i>
                        <span>API管理</span>
                        <span class="ml-auto bg-quantum-accent/20 text-quantum-accent text-xs py-0.5 px-2 rounded">新</span>
                    </a>
                    
                    <!-- 安全中心 -->
                    <a href="#" class="sidebar-item" data-section="security">
                        <i class="fas fa-shield-alt mr-3 w-5 text-center"></i>
                        <span>安全中心</span>
                    </a>
                    
                    <!-- 使用统计 -->
                    <a href="#" class="sidebar-item" data-section="usage">
                        <i class="fas fa-chart-line mr-3 w-5 text-center"></i>
                        <span>使用统计</span>
                    </a>
                    
                    <!-- 集成 -->
                    <a href="#" class="sidebar-item" data-section="integrations">
                        <i class="fas fa-plug mr-3 w-5 text-center"></i>
                        <span>集成</span>
                    </a>
                    
                    <!-- 账单 -->
                    <a href="#" class="sidebar-item" data-section="billing">
                        <i class="fas fa-credit-card mr-3 w-5 text-center"></i>
                        <span>账单与订阅</span>
                    </a>
                </div>
                
                <div class="mt-10 pt-5 border-t border-gray-800">
                    <h3 class="px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider">
                        开发者资源
                    </h3>
                    
                    <div class="mt-3 space-y-1">
                        <!-- 文档 -->
                        <a href="/docs-center.html" class="sidebar-item">
                            <i class="fas fa-book mr-3 w-5 text-center"></i>
                            <span>开发文档</span>
                        </a>
                        
                        <!-- 示例 -->
                        <a href="/code-examples.html" class="sidebar-item">
                            <i class="fas fa-code-branch mr-3 w-5 text-center"></i>
                            <span>代码示例</span>
                        </a>
                        
                        <!-- 社区 -->
                        <a href="/api-community.html" class="sidebar-item">
                            <i class="fas fa-users mr-3 w-5 text-center"></i>
                            <span>开发者社区</span>
                        </a>
                    </div>
                </div>
            </nav>
            
            <!-- 底部状态 -->
            <div class="absolute bottom-0 left-0 right-0 p-4">
                <div class="flex items-center justify-between text-xs text-gray-400">
                    <div class="flex items-center">
                        <span class="status-indicator status-online mr-2"></span>
                        <span>系统正常</span>
                    </div>
                    <a href="/system_status.html" class="text-quantum-accent hover:underline">查看状态</a>
                </div>
            </div>
        </aside>
        
        <!-- 主内容 -->
        <main class="flex-1 overflow-y-auto">
            <div class="flex flex-col h-full">
                <!-- 聊天区域 -->
                <div class="flex-1 flex flex-col p-4 md:p-6 overflow-hidden">
                    <!-- 聊天头部 -->
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h1 class="text-2xl font-bold">AI助手</h1>
                            <p class="text-gray-400">与您的智能助手对话，获取帮助和建议</p>
                        </div>
                        <div class="flex space-x-2">
                            <button class="p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors" title="新建对话">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors" title="设置">
                                <i class="fas fa-cog"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 聊天历史 -->
                    <div id="chatHistory" class="flex-1 overflow-y-auto space-y-6 mb-6 pr-2">
                        <!-- 欢迎消息 -->
                        <div class="flex items-start space-x-4">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-quantum-primary to-quantum-accent flex-shrink-0 flex items-center justify-center">
                                <i class="fas fa-robot text-white"></i>
                            </div>
                            <div class="flex-1 glass-effect p-4 rounded-xl rounded-tl-none">
                                <p class="text-white">您好！我是AlingAi助手，有什么我可以帮您的吗？</p>
                                <p class="mt-2 text-sm text-gray-400">我可以帮您：</p>
                                <ul class="mt-1 text-sm text-gray-300 space-y-1 list-disc list-inside">
                                    <li>回答问题和提供信息</li>
                                    <li>编写和解释代码</li>
                                    <li>生成创意内容</li>
                                    <li>协助项目开发和问题解决</li>
                                </ul>
                                <div class="mt-3 text-xs text-gray-500">今天 10:30</div>
                            </div>
                        </div>
                        
                        <!-- 用户消息示例 -->
                        <div class="flex items-start space-x-4 justify-end">
                            <div class="flex-1 bg-quantum-primary/30 p-4 rounded-xl rounded-tr-none">
                                <p class="text-white">你能帮我解释一下量子计算的基本原理吗？</p>
                                <div class="mt-3 text-xs text-gray-400 text-right">今天 10:31</div>
                            </div>
                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex-shrink-0 flex items-center justify-center">
                                <span class="font-medium text-sm">JD</span>
                            </div>
                        </div>
                        
                        <!-- AI回复示例 -->
                        <div class="flex items-start space-x-4">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-quantum-primary to-quantum-accent flex-shrink-0 flex items-center justify-center">
                                <i class="fas fa-robot text-white"></i>
                            </div>
                            <div class="flex-1 glass-effect p-4 rounded-xl rounded-tl-none">
                                <p class="text-white">量子计算是一种利用量子力学现象进行计算的技术，与传统计算有根本的不同。以下是几个关键概念：</p>
                                <ul class="mt-2 text-sm text-gray-300 space-y-1 list-disc list-inside">
                                    <li><strong>量子比特（Qubit）</strong>：不同于经典比特的0或1，量子比特可以同时处于0和1的叠加态。</li>
                                    <li><strong>叠加原理</strong>：量子系统可以同时存在于多个状态，这使得量子计算机能够并行处理大量可能性。</li>
                                    <li><strong>量子纠缠</strong>：两个或多个量子比特可以相互关联，即使它们相距很远。</li>
                                    <li><strong>量子干涉</strong>：量子波函数可以相互干涉，增强某些计算路径而抵消其他路径。</li>
                                </ul>
                                <p class="mt-2 text-white">这些特性使量子计算在特定问题上（如因式分解、搜索和优化问题）比经典计算机有潜在的指数级加速。</p>
                                <div class="mt-3 text-xs text-gray-500">今天 10:32</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 输入区域 -->
                    <div class="relative">
                        <div class="glass-effect rounded-xl p-4">
                            <div class="flex items-end space-x-2">
                                <div class="flex-1">
                                    <textarea id="messageInput" rows="1" class="w-full bg-transparent border-none focus:ring-0 text-white resize-none placeholder-gray-500" placeholder="输入您的问题或请求..." style="min-height: 24px; max-height: 150px;"></textarea>
                                </div>
                                <div class="flex space-x-2 items-center">
                                    <button class="p-2 text-gray-400 hover:text-white" title="上传文件">
                                        <i class="fas fa-paperclip"></i>
                                    </button>
                                    <button id="sendButton" class="p-2 rounded-lg bg-quantum-primary hover:bg-quantum-primary/80 transition-colors">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-2 text-xs text-gray-500">
                                <span>AlingAi助手将根据您的输入生成回应。请勿分享敏感个人信息。</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- 右侧面板 -->
        <aside class="hidden xl:block w-80 border-l border-gray-800 bg-black/20 backdrop-blur-md p-4 overflow-y-auto">
            <!-- 模型选择 -->
            <div class="mb-6">
                <h3 class="text-sm font-medium text-gray-400 mb-2">AI模型</h3>
                <div class="glass-effect p-3 rounded-lg">
                    <select class="w-full bg-transparent border-none focus:ring-0 text-white">
                        <option value="alingai-pro">AlingAi Pro</option>
                        <option value="alingai-standard">AlingAi Standard</option>
                        <option value="alingai-fast">AlingAi Fast</option>
                    </select>
                </div>
            </div>
            
            <!-- 对话历史 -->
            <div class="mb-6">
                <h3 class="text-sm font-medium text-gray-400 mb-2">最近对话</h3>
                <div class="space-y-2">
                    <div class="glass-effect p-3 rounded-lg hover:bg-white/10 cursor-pointer transition-colors">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">量子计算基础</span>
                            <span class="text-xs text-gray-500">今天</span>
                        </div>
                    </div>
                    <div class="glass-effect p-3 rounded-lg hover:bg-white/10 cursor-pointer transition-colors">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">项目规划助手</span>
                            <span class="text-xs text-gray-500">昨天</span>
                        </div>
                    </div>
                    <div class="glass-effect p-3 rounded-lg hover:bg-white/10 cursor-pointer transition-colors">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">代码优化建议</span>
                            <span class="text-xs text-gray-500">3天前</span>
                        </div>
                    </div>
                </div>
                <div class="mt-2 text-center">
                    <a href="#" class="text-xs text-quantum-accent hover:underline">查看全部历史</a>
                </div>
            </div>
            
            <!-- 提示模板 -->
            <div class="mb-6">
                <h3 class="text-sm font-medium text-gray-400 mb-2">提示模板</h3>
                <div class="space-y-2">
                    <div class="glass-effect p-3 rounded-lg hover:bg-white/10 cursor-pointer transition-colors">
                        <span class="text-sm">代码解释器</span>
                    </div>
                    <div class="glass-effect p-3 rounded-lg hover:bg-white/10 cursor-pointer transition-colors">
                        <span class="text-sm">创意写作</span>
                    </div>
                    <div class="glass-effect p-3 rounded-lg hover:bg-white/10 cursor-pointer transition-colors">
                        <span class="text-sm">数据分析</span>
                    </div>
                </div>
                <div class="mt-2 text-center">
                    <a href="#" class="text-xs text-quantum-accent hover:underline">创建自定义模板</a>
                </div>
            </div>
            
            <!-- 使用统计 -->
            <div>
                <h3 class="text-sm font-medium text-gray-400 mb-2">本月使用情况</h3>
                <div class="glass-effect p-3 rounded-lg">
                    <div class="mb-2">
                        <div class="flex justify-between text-xs mb-1">
                            <span>API调用</span>
                            <span>65%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="bg-quantum-primary h-2 rounded-full" style="width: 65%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-xs mb-1">
                            <span>Token用量</span>
                            <span>42%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="bg-quantum-accent h-2 rounded-full" style="width: 42%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>
    
    <!-- 核心JS -->
    <script src="/assets/js/unified-core.js"></script>
    
    <!-- 助手特定脚本 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化量子粒子背景
            initQuantumParticles('quantum-particles', {
                particleCount: 30,
                particleColor: ['#4F46E5', '#8B5CF6', '#06B6D4'],
                connectionDistance: 120,
                connectionOpacity: 0.3
            });
            
            // 设置侧边栏
            setupSidebar();
            
            // 设置用户菜单
            setupUserMenu();
            
            // 设置聊天功能
            setupChat();
            
            // 代码高亮
            highlightCodeBlocks();
            
            // 自动调整文本区域高度
            setupTextareaAutoResize();
        });
        
        // 设置聊天功能
        function setupChat() {
            const chatHistory = document.getElementById('chatHistory');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            
            // 发送消息
            function sendMessage() {
                const message = messageInput.value.trim();
                if (!message) return;
                
                // 添加用户消息
                appendUserMessage(message);
                
                // 清空输入框
                messageInput.value = '';
                messageInput.style.height = 'auto';
                
                // 显示AI正在输入指示器
                showTypingIndicator();
                
                // 模拟AI回复（实际应用中应该调用API）
                setTimeout(() => {
                    // 移除输入指示器
                    removeTypingIndicator();
                    
                    // 添加AI回复
                    const aiResponse = generateAIResponse(message);
                    appendAIMessage(aiResponse);
                    
                    // 高亮新添加的代码块
                    highlightCodeBlocks();
                    
                    // 滚动到底部
                    scrollToBottom();
                }, 1500);
            }
            
            // 添加用户消息
            function appendUserMessage(message) {
                const now = new Date();
                const timeString = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                const messageElement = document.createElement('div');
                messageElement.className = 'flex items-start space-x-4 justify-end';
                messageElement.innerHTML = `
                    <div class="flex-1 bg-quantum-primary/30 p-4 rounded-xl rounded-tr-none">
                        <p class="text-white">${escapeHtml(message)}</p>
                        <div class="mt-3 text-xs text-gray-400 text-right">今天 ${timeString}</div>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex-shrink-0 flex items-center justify-center">
                        <span class="font-medium text-sm">JD</span>
                    </div>
                `;
                
                chatHistory.appendChild(messageElement);
                scrollToBottom();
            }
            
            // 添加AI消息
            function appendAIMessage(message) {
                const now = new Date();
                const timeString = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                const messageElement = document.createElement('div');
                messageElement.className = 'flex items-start space-x-4';
                messageElement.innerHTML = `
                    <div class="w-10 h-10 rounded-full bg-gradient-to-r from-quantum-primary to-quantum-accent flex-shrink-0 flex items-center justify-center">
                        <i class="fas fa-robot text-white"></i>
                    </div>
                    <div class="flex-1 glass-effect p-4 rounded-xl rounded-tl-none">
                        ${message}
                        <div class="mt-3 text-xs text-gray-500">今天 ${timeString}</div>
                    </div>
                `;
                
                chatHistory.appendChild(messageElement);
                scrollToBottom();
            }
            
            // 显示AI正在输入指示器
            function showTypingIndicator() {
                const indicator = document.createElement('div');
                indicator.id = 'typingIndicator';
                indicator.className = 'flex items-start space-x-4';
                indicator.innerHTML = `
                    <div class="w-10 h-10 rounded-full bg-gradient-to-r from-quantum-primary to-quantum-accent flex-shrink-0 flex items-center justify-center">
                        <i class="fas fa-robot text-white"></i>
                    </div>
                    <div class="flex-1 glass-effect p-4 rounded-xl rounded-tl-none">
                        <div class="flex space-x-2">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                `;
                
                chatHistory.appendChild(indicator);
                scrollToBottom();
                
                // 添加样式
                const style = document.createElement('style');
                style.textContent = `
                    .typing-dot {
                        width: 8px;
                        height: 8px;
                        background-color: rgba(255, 255, 255, 0.7);
                        border-radius: 50%;
                        animation: typing-animation 1.4s infinite ease-in-out both;
                    }
                    .typing-dot:nth-child(1) {
                        animation-delay: 0s;
                    }
                    .typing-dot:nth-child(2) {
                        animation-delay: 0.2s;
                    }
                    .typing-dot:nth-child(3) {
                        animation-delay: 0.4s;
                    }
                    @keyframes typing-animation {
                        0%, 80%, 100% {
                            transform: scale(0.6);
                            opacity: 0.4;
                        }
                        40% {
                            transform: scale(1);
                            opacity: 1;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // 移除AI正在输入指示器
            function removeTypingIndicator() {
                const indicator = document.getElementById('typingIndicator');
                if (indicator) {
                    indicator.remove();
                }
            }
            
            // 模拟AI回复生成（实际应用中应该调用API）
            function generateAIResponse(userMessage) {
                // 简单的响应逻辑，实际应用中应该调用后端API
                const lowercaseMessage = userMessage.toLowerCase();
                
                if (lowercaseMessage.includes('你好') || lowercaseMessage.includes('嗨') || lowercaseMessage.includes('hi') || lowercaseMessage.includes('hello')) {
                    return '<p class="text-white">您好！很高兴为您服务。有什么我可以帮助您的吗？</p>';
                }
                else if (lowercaseMessage.includes('代码') || lowercaseMessage.includes('编程') || lowercaseMessage.includes('程序')) {
                    return `
                        <p class="text-white">这是一个简单的JavaScript函数示例：</p>
                        <pre class="mt-3 rounded-lg overflow-x-auto bg-gray-900 p-4"><code class="language-javascript">function calculateSum(array) {
  return array.reduce((sum, current) => {
    return sum + current;
  }, 0);
}

// 使用示例
const numbers = [1, 2, 3, 4, 5];
const sum = calculateSum(numbers);
console.log(\`数组和为: \${sum}\`); // 输出: 数组和为: 15</code></pre>
                        <p class="mt-3 text-white">这个函数使用了JavaScript的reduce方法来计算数组中所有元素的和。</p>
                    `;
                }
                else if (lowercaseMessage.includes('量子计算') || lowercaseMessage.includes('quantum')) {
                    return `
                        <p class="text-white">量子计算是一种利用量子力学原理进行信息处理的计算方式。与经典计算机使用位（0或1）不同，量子计算机使用量子比特（qubit），可以同时处于多个状态。</p>
                        <p class="mt-2 text-white">量子计算的核心优势在于：</p>
                        <ul class="mt-1 text-sm text-gray-300 space-y-1 list-disc list-inside">
                            <li>量子叠加：一个量子比特可以同时表示0和1</li>
                            <li>量子纠缠：多个量子比特可以形成相互关联的状态</li>
                            <li>量子干涉：可以增强正确计算路径的概率</li>
                        </ul>
                        <p class="mt-2 text-white">这些特性使量子计算在特定问题上比经典计算机有潜在的指数级加速。</p>
                    `;
                }
                else if (lowercaseMessage.includes('ai') || lowercaseMessage.includes('人工智能') || lowercaseMessage.includes('机器学习')) {
                    return `
                        <p class="text-white">人工智能(AI)是计算机科学的一个分支，致力于创建能够模拟人类智能的系统。机器学习是AI的一个子领域，它使计算机能够从数据中学习，而无需显式编程。</p>
                        <p class="mt-2 text-white">AI的主要应用领域包括：</p>
                        <ul class="mt-1 text-sm text-gray-300 space-y-1 list-disc list-inside">
                            <li>自然语言处理</li>
                            <li>计算机视觉</li>
                            <li>推荐系统</li>
                            <li>自动驾驶</li>
                            <li>医疗诊断</li>
                        </ul>
                        <p class="mt-2 text-white">随着深度学习技术的发展，AI在近年来取得了显著进步，特别是在语言理解和图像识别方面。</p>
                    `;
                }
                else {
                    return `<p class="text-white">感谢您的提问。我需要更多信息来为您提供准确的回答。您能否提供更多详细信息或者重新表述您的问题？</p>`;
                }
            }
            
            // HTML转义，防止XSS
            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
            
            // 滚动到底部
            function scrollToBottom() {
                chatHistory.scrollTop = chatHistory.scrollHeight;
            }
            
            // 绑定发送按钮点击事件
            if (sendButton) {
                sendButton.addEventListener('click', sendMessage);
            }
            
            // 绑定输入框回车事件
            if (messageInput) {
                messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
            }
        }
        
        // 代码高亮
        function highlightCodeBlocks() {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        }
        
        // 自动调整文本区域高度
        function setupTextareaAutoResize() {
            const textarea = document.getElementById('messageInput');
            if (!textarea) return;
            
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
                
                // 限制最大高度
                if (this.scrollHeight > 150) {
                    this.style.overflowY = 'auto';
                    this.style.height = '150px';
                } else {
                    this.style.overflowY = 'hidden';
                }
            });
        }
        
        // 设置侧边栏切换
        function setupSidebar() {
            const toggleButton = document.getElementById('toggleSidebar');
            const sidebar = document.getElementById('sidebar');
            
            if (toggleButton && sidebar) {
                toggleButton.addEventListener('click', () => {
                    sidebar.classList.toggle('-translate-x-full');
                });
            }
            
            // 侧边栏项点击事件
            const sidebarItems = document.querySelectorAll('.sidebar-item');
            
            sidebarItems.forEach(item => {
                item.addEventListener('click', () => {
                    // 移除所有active类
                    sidebarItems.forEach(i => i.classList.remove('active'));
                    
                    // 添加active类到当前项
                    item.classList.add('active');
                });
            });
        }
        
        // 设置用户菜单
        function setupUserMenu() {
            const userMenuBtn = document.getElementById('userMenuBtn');
            const userMenu = document.getElementById('userMenu');
            
            if (userMenuBtn && userMenu) {
                userMenuBtn.addEventListener('click', () => {
                    userMenu.classList.toggle('hidden');
                });
                
                // 点击其他地方关闭菜单
                document.addEventListener('click', (e) => {
                    if (!userMenuBtn.contains(e.target) && !userMenu.contains(e.target)) {
                        userMenu.classList.add('hidden');
                    }
                });
            }
        }
    </script>
</body>
</html> 