// åŠŸèƒ½éªŒè¯è„šæœ¬ - ä¸»é¡µç™»å½•æ¨¡æ€æ¡†å’ŒUIç»„ä»¶æµ‹è¯•  // 1. æ£€æŸ¥é¡µé¢åŸºæœ¬ç»“æ„ function checkPageStructure() {  const essentialElements = [ { id: 'login-btn', name: 'ç™»å½•æŒ‰é’®' }, { id: 'login-modal', name: 'ç™»å½•æ¨¡æ€æ¡†' }, { id: 'login-form', name: 'ç™»å½•è¡¨å•' }, { id: 'login-username', name: 'ç”¨æˆ·åè¾“å…¥æ¡†' }, { id: 'login-password', name: 'å¯†ç è¾“å…¥æ¡†' }, { id: 'login-submit', name: 'ç™»å½•æäº¤æŒ‰é’®' } ]; const results = []; essentialElements.forEach(element => { const el = document.getElementById(element.id); const exists = el !== null; results.push({ ...element, exists, element: el });  }); return results; } // 2. æ£€æŸ¥CSSæ ·å¼åŠ è½½ function checkCSSStyles() {  const loginModal = document.getElementById('login-modal'); if (!loginModal) {  return false; } const styles = window.getComputedStyle(loginModal); const isHidden = styles.display === 'none' || loginModal.classList.contains('hidden');    return true; } // 3. æµ‹è¯•ç™»å½•æŒ‰é’®ç‚¹å‡»åŠŸèƒ½ function testLoginButtonClick() {  const loginBtn = document.getElementById('login-btn'); const loginModal = document.getElementById('login-modal'); if (!loginBtn || !loginModal) {  return false; } // è®°å½•åˆå§‹çŠ¶æ€ const initiallyHidden = loginModal.style.display === 'none' || loginModal.classList.contains('hidden') || !loginModal.classList.contains('show');  // æ¨¡æ‹Ÿç‚¹å‡»ç™»å½•æŒ‰é’® try { loginBtn.click(); // æ£€æŸ¥æ¨¡æ€æ¡†æ˜¯å¦æ˜¾ç¤º setTimeout(() => { const isNowVisible = loginModal.classList.contains('show') || loginModal.style.display === 'flex' || !loginModal.classList.contains('hidden');  if (isNowVisible) {  // æµ‹è¯•å…³é—­åŠŸèƒ½ setTimeout(() => { testModalClose(); }, 1000); } else {  } }, 500); } catch (error) {  return false; } return true; } // 4. æµ‹è¯•æ¨¡æ€æ¡†å…³é—­åŠŸèƒ½ function testModalClose() {  const loginModal = document.getElementById('login-modal'); const closeBtn = loginModal ? loginModal.querySelector('.login-modal-close') : null; if (!closeBtn) {  return false; } try { closeBtn.click(); setTimeout(() => { const isHidden = !loginModal.classList.contains('show') || loginModal.classList.contains('hidden') || loginModal.style.display === 'none';  if (isHidden) {  } }, 500); } catch (error) {  return false; } return true; } // 5. æµ‹è¯•è¡¨å•éªŒè¯ function testFormValidation() {  const loginForm = document.getElementById('login-form'); const usernameInput = document.getElementById('login-username'); const passwordInput = document.getElementById('login-password'); if (!loginForm || !usernameInput || !passwordInput) {  return false; } // æµ‹è¯•ç©ºè¡¨å•æäº¤ usernameInput.value = ''; passwordInput.value = ''; try { const event = new Event('submit', { bubbles: true, cancelable: true }); loginForm.dispatchEvent(event); setTimeout(() => { const usernameError = document.getElementById('username-error'); const passwordError = document.getElementById('password-error'); const hasUsernameError = usernameError && usernameError.textContent.trim() !== ''; const hasPasswordError = passwordError && passwordError.textContent.trim() !== '';   if (hasUsernameError && hasPasswordError) {  } }, 100); } catch (error) {  return false; } return true; } // 6. æ£€æŸ¥JavaScriptæ–‡ä»¶åŠ è½½ function checkJavaScriptFiles() {  const expectedFunctions = [ 'initLoginModal', 'validateLoginForm', 'showError', 'clearErrors' ]; expectedFunctions.forEach(funcName => { const exists = typeof window[funcName] === 'function';  }); // æ£€æŸ¥å…¨å±€å¯¹è±¡ const globalObjects = ['auth', 'i18n', 'gsap']; globalObjects.forEach(objName => { const exists = typeof window[objName] !== 'undefined';  }); } // 7. ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š function generateTestReport() {  const report = { timestamp: new Date().toLocaleString('zh-CN'), tests: [ { name: 'é¡µé¢ç»“æ„æ£€æŸ¥', status: 'completed' }, { name: 'CSSæ ·å¼åŠ è½½', status: 'completed' }, { name: 'ç™»å½•æŒ‰é’®åŠŸèƒ½', status: 'completed' }, { name: 'æ¨¡æ€æ¡†å…³é—­', status: 'completed' }, { name: 'è¡¨å•éªŒè¯', status: 'completed' }, { name: 'JavaScriptåŠ è½½', status: 'completed' } ], recommendations: [ 'âœ… ç™»å½•æ¨¡æ€æ¡†HTMLç»“æ„å®Œæ•´', 'âœ… CSSæ ·å¼æ­£ç¡®åŠ è½½', 'âœ… åŸºæœ¬äº¤äº’åŠŸèƒ½å®ç°', 'ğŸ”§ éœ€è¦æµ‹è¯•å®é™…ç™»å½•APIé›†æˆ', 'ğŸ”§ éœ€è¦æµ‹è¯•è·¨æµè§ˆå™¨å…¼å®¹æ€§', 'ğŸ”§ éœ€è¦æµ‹è¯•ç§»åŠ¨ç«¯å“åº”å¼è®¾è®¡' ] };  return report; } // ä¸»æµ‹è¯•å‡½æ•° function runAllTests() {  setTimeout(() => { checkPageStructure(); }, 500); setTimeout(() => { checkCSSStyles(); }, 1000); setTimeout(() => { checkJavaScriptFiles(); }, 1500); setTimeout(() => { testLoginButtonClick(); }, 2000); setTimeout(() => { testFormValidation(); }, 4000); setTimeout(() => { generateTestReport(); }, 6000); } // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œæµ‹è¯• if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', runAllTests); } else { runAllTests(); } // å¯¼å‡ºæµ‹è¯•å‡½æ•°ä»¥ä¾¿æ‰‹åŠ¨è°ƒç”¨ window.AlingAiTests = { runAllTests, checkPageStructure, checkCSSStyles, testLoginButtonClick, testModalClose, testFormValidation, checkJavaScriptFiles, generateTestReport }; 