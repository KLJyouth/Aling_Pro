class AnimationSystem{constructor(){this.particles=[];this.particleCanvas=null;this.particleCtx=null;this.matrixCanvas=null;this.matrixCtx=null;this.matrixDrops=[];this.initAnimations();}initAnimations(){this.initParticleSystem();this.initMatrixEffect();this.startAnimationLoop();}initParticleSystem(){this.particleCanvas=document.getElementById('particleCanvas');if(!this.particleCanvas)return;this.particleCtx=this.particleCanvas.getContext('2d');this.resizeParticleCanvas();for(let i=0;i < 50;i++){this.particles.push({x: Math.random()*this.particleCanvas.width,y: Math.random()*this.particleCanvas.height,vx:(Math.random()-0.5)*0.5,vy:(Math.random()-0.5)*0.5,radius: Math.random()*2+1,opacity: Math.random()*0.5+0.2});}window.addEventListener('resize',()=> this.resizeParticleCanvas());}initMatrixEffect(){this.matrixCanvas=document.getElementById('matrixCanvas');if(!this.matrixCanvas)return;this.matrixCtx=this.matrixCanvas.getContext('2d');this.resizeMatrixCanvas();const columns=Math.floor(this.matrixCanvas.width/20);for(let i=0;i < columns;i++){this.matrixDrops[i]=Math.random()*-100;}window.addEventListener('resize',()=> this.resizeMatrixCanvas());}resizeParticleCanvas(){if(!this.particleCanvas)return;this.particleCanvas.width=window.innerWidth;this.particleCanvas.height=window.innerHeight;}resizeMatrixCanvas(){if(!this.matrixCanvas)return;this.matrixCanvas.width=window.innerWidth;this.matrixCanvas.height=window.innerHeight;}updateParticles(){if(!this.particleCtx)return;this.particleCtx.clearRect(0,0,this.particleCanvas.width,this.particleCanvas.height);this.particles.forEach(particle=>{particle.x+=particle.vx;particle.y+=particle.vy;if(particle.x < 0 || particle.x > this.particleCanvas.width)particle.vx*=-1;if(particle.y < 0 || particle.y > this.particleCanvas.height)particle.vy*=-1;this.particleCtx.beginPath();this.particleCtx.arc(particle.x,particle.y,particle.radius,0,Math.PI*2);this.particleCtx.fillStyle=`rgba(102,126,234,${particle.opacity})`;this.particleCtx.fill();});}updateMatrixEffect(){if(!this.matrixCtx)return;this.matrixCtx.fillStyle='rgba(0,0,0,0.05)';this.matrixCtx.fillRect(0,0,this.matrixCanvas.width,this.matrixCanvas.height);this.matrixCtx.fillStyle='#0f0';this.matrixCtx.font='15px monospace';this.matrixDrops.forEach((drop,i)=>{const text=String.fromCharCode(Math.random()*128);const x=i*20;const y=drop*20;this.matrixCtx.fillText(text,x,y);if(y > this.matrixCanvas.height && Math.random()> 0.975){this.matrixDrops[i]=0;}this.matrixDrops[i]++;});}startAnimationLoop(){const animate=()=>{this.updateParticles();this.updateMatrixEffect();requestAnimationFrame(animate);};animate();}showQuantumLoader(){const loader=document.getElementById('quantumLoader');if(loader){loader.style.display='block';}}hideQuantumLoader(){const loader=document.getElementById('quantumLoader');if(loader){loader.style.display='none';}}}class ChatSystem{constructor(){this.isOpen=false;this.messages=[];this.initChat();}initChat(){const chatWidget=document.getElementById('chatWidget');const chatToggleBtn=document.getElementById('chatToggleBtn');if(chatToggleBtn){chatToggleBtn.addEventListener('click',()=> this.toggleChat());}this.addMessage('assistant','ğŸ‘‹ æ¬¢è¿ä½¿ç”¨AlingAiç»¼åˆæ£€æµ‹ç³»ç»Ÿï¼æˆ‘å¯ä»¥å¸®æ‚¨ï¼š\nâ€¢ è§£é‡Šæ£€æµ‹ç»“æœ\nâ€¢ æä¾›ç³»ç»ŸçŠ¶æ€ä¿¡æ¯\nâ€¢ å›ç­”æŠ€æœ¯é—®é¢˜');}toggleChat(){const chatWidget=document.getElementById('chatWidget');const chatToggleBtn=document.getElementById('chatToggleBtn');if(!chatWidget)return;this.isOpen=!this.isOpen;if(this.isOpen){chatWidget.style.display='block';chatWidget.classList.add('show');chatToggleBtn.innerHTML='<i class="bi bi-x"></i>';}else{chatWidget.style.display='none';chatWidget.classList.remove('show');chatToggleBtn.innerHTML='<i class="bi bi-chat-dots"></i>';}}addMessage(type,content){const messagesContainer=document.getElementById('chatMessages');if(!messagesContainer)return;const messageDiv=document.createElement('div');messageDiv.className=`chat-message ${type}`;messageDiv.innerHTML=content.replace(/\n/g,'<br>');messagesContainer.appendChild(messageDiv);messagesContainer.scrollTop=messagesContainer.scrollHeight;this.messages.push({type,content,timestamp: new Date().toISOString()});}sendMessage(){const input=document.getElementById('chatInput');if(!input || !input.value.trim())return;const message=input.value.trim();this.addMessage('user',message);input.value='';setTimeout(()=>{const response=this.generateResponse(message);this.addMessage('assistant',response);},1000);}generateResponse(message){const responses={'çŠ¶æ€': 'âœ… ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å°±ç»ªã€‚','æ£€æµ‹': 'ğŸ” æ‚¨å¯ä»¥ä½¿ç”¨å¿«é€Ÿæ£€æµ‹æˆ–å®Œæ•´æ£€æµ‹åŠŸèƒ½æ¥éªŒè¯ç³»ç»ŸçŠ¶æ€ã€‚','æŠ¥å‘Š': 'ğŸ“Š æ£€æµ‹æŠ¥å‘Šå¯ä»¥å¯¼å‡ºä¸ºJSONæˆ–CSVæ ¼å¼ï¼ŒåŒ…å«è¯¦ç»†çš„ç³»ç»Ÿä¿¡æ¯ã€‚','å¸®åŠ©': 'ğŸ†˜ æˆ‘å¯ä»¥ååŠ©æ‚¨è¿›è¡Œç³»ç»Ÿæ£€æµ‹ã€æŸ¥çœ‹æŠ¥å‘Šæˆ–è§£ç­”æŠ€æœ¯é—®é¢˜ã€‚','åŠŸèƒ½': 'âš¡ ç³»ç»ŸåŒ…å«åŠ¨ç”»æ•ˆæœã€èŠå¤©åŠŸèƒ½ã€æ— éšœç¢æ”¯æŒç­‰å¤šç§ç‰¹æ€§ã€‚'};for(const [key,response] of Object.entries(responses)){if(message.includes(key)){return response;}}return `ğŸ¤– æ”¶åˆ°æ‚¨çš„æ¶ˆæ¯ï¼š"${message}"ã€‚æˆ‘æ­£åœ¨å­¦ä¹ ä¸­ï¼Œå¦‚éœ€å…·ä½“å¸®åŠ©è¯·æŸ¥çœ‹ç³»ç»Ÿæ£€æµ‹åŠŸèƒ½æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚`;}handleKeyPress(event){if(event.key==='Enter'){this.sendMessage();}}}class AccessibilitySystem{constructor(){this.fontSize=100;this.highContrast=false;this.screenReaderMode=false;this.toolbarVisible=true;this.initAccessibility();}initAccessibility(){document.addEventListener('keydown',(event)=>{if(event.altKey && event.key==='a'){this.toggleAccessibilityToolbar();}});this.addFocusStyles();}adjustFontSize(delta){this.fontSize+=delta*10;this.fontSize=Math.max(80,Math.min(150,this.fontSize));document.body.style.fontSize=`${this.fontSize}%`;if(this.fontSize > 100){document.body.classList.add('large-font');}else{document.body.classList.remove('large-font');}}toggleHighContrast(){this.highContrast=!this.highContrast;if(this.highContrast){document.body.classList.add('high-contrast');}else{document.body.classList.remove('high-contrast');}}toggleScreenReaderMode(){this.screenReaderMode=!this.screenReaderMode;if(this.screenReaderMode){document.body.classList.add('screen-reader-mode');this.addAriaLabels();}else{document.body.classList.remove('screen-reader-mode');}}toggleAccessibilityToolbar(){const toolbar=document.getElementById('accessibilityToolbar');if(!toolbar)return;this.toolbarVisible=!this.toolbarVisible;toolbar.style.display=this.toolbarVisible ? 'block' : 'none';}addFocusStyles(){const style=document.createElement('style');style.textContent=`*:focus{outline: 3px solid #667eea !important;outline-offset: 2px;}button:focus,input:focus,select:focus,textarea:focus{box-shadow: 0 0 0 3px rgba(102,126,234,0.3)!important;}`;document.head.appendChild(style);}addAriaLabels(){const buttons=document.querySelectorAll('button');buttons.forEach((btn,index)=>{if(!btn.getAttribute('aria-label')&& !btn.textContent.trim()){btn.setAttribute('aria-label',`æŒ‰é’® ${index+1}`);}});const inputs=document.querySelectorAll('input');inputs.forEach((input,index)=>{if(!input.getAttribute('aria-label')&& !input.placeholder){input.setAttribute('aria-label',`è¾“å…¥æ¡† ${index+1}`);}});}}class FrontendResourceManager{constructor(){this.resources={css: 0,javascript: 0,domElements: 0};this.checkResources();}checkResources(){this.resources.css=document.styleSheets.length;this.resources.javascript=document.scripts.length;this.resources.domElements=document.querySelectorAll('*').length;}getResourceStatus(){return{css: this.resources.css > 0 ? 'loaded' : 'missing',javascript: this.resources.javascript > 0 ? 'loaded' : 'missing',domElements: this.resources.domElements > 10 ? 'loaded' : 'missing'};}}function toggleChat(){if(window.chatSystem){window.chatSystem.toggleChat();}}function sendChatMessage(){if(window.chatSystem){window.chatSystem.sendMessage();}}function handleChatKeyPress(event){if(window.chatSystem){window.chatSystem.handleKeyPress(event);}}function adjustFontSize(delta){if(window.accessibilitySystem){window.accessibilitySystem.adjustFontSize(delta);}}function toggleHighContrast(){if(window.accessibilitySystem){window.accessibilitySystem.toggleHighContrast();}}function toggleScreenReaderMode(){if(window.accessibilitySystem){window.accessibilitySystem.toggleScreenReaderMode();}}function toggleAccessibilityToolbar(){if(window.accessibilitySystem){window.accessibilitySystem.toggleAccessibilityToolbar();}}function showQuantumLoader(){if(window.animationSystem){window.animationSystem.showQuantumLoader();}}function hideQuantumLoader(){if(window.animationSystem){window.animationSystem.hideQuantumLoader();}}document.addEventListener('DOMContentLoaded',function(){setTimeout(()=>{try{window.animationSystem=new AnimationSystem();window.chatSystem=new ChatSystem();window.accessibilitySystem=new AccessibilitySystem();window.frontendResourceManager=new FrontendResourceManager();window.chatInstance=window.chatSystem;}catch(error){console.error('âŒ å‰ç«¯åŠŸèƒ½ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥:',error);}},1000);});