<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlingAi Pro 5.0 - 系统安装向导</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .install-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .install-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
        }
        
        .install-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .install-body {
            padding: 40px;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .step.active {
            background: #667eea;
            color: white;
        }
        
        .step.completed {
            background: #28a745;
            color: white;
        }
        
        .step.pending {
            background: #f8f9fa;
            color: #6c757d;
            border: 2px solid #dee2e6;
        }
        
        .step-content {
            display: none;
        }
        
        .step-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .btn-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            color: white;
        }
        
        .requirement-check {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .requirement-check.success {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        
        .requirement-check.error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        
        .requirement-check.warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .progress-bar-custom {
            height: 8px;
            border-radius: 4px;
            background: #e9ecef;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            border-radius: 4px;
        }
        
        .install-logo {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2rem;
        }
    </style>
</head>
<body>
    <div class="install-container">
        <div class="install-card">
            <!-- 安装头部 -->
            <div class="install-header">
                <div class="install-logo">
                    <i class="bi bi-cpu"></i>
                </div>
                <h1 class="h3 mb-0">AlingAi Pro 5.0</h1>
                <p class="mb-0">智能办公系统安装向导</p>
            </div>
            
            <!-- 安装主体 -->
            <div class="install-body">
                <!-- 步骤指示器 -->
                <div class="step-indicator">
                    <div class="step active" data-step="1">1</div>
                    <div class="step pending" data-step="2">2</div>
                    <div class="step pending" data-step="3">3</div>
                    <div class="step pending" data-step="4">4</div>
                    <div class="step pending" data-step="5">5</div>
                </div>
                
                <!-- 进度条 -->
                <div class="progress-bar-custom">
                    <div class="progress-fill" style="width: 20%"></div>
                </div>
                
                <!-- 步骤1: 欢迎页面 -->
                <div class="step-content active" data-step="1">
                    <div class="text-center">
                        <h4><i class="bi bi-hand-thumbs-up text-primary"></i> 欢迎使用AlingAi Pro 5.0</h4>
                        <p class="text-muted">感谢您选择AlingAi Pro 5.0智能办公系统。本向导将引导您完成系统安装和配置。</p>
                        
                        <div class="row mt-4">
                            <div class="col-md-4">
                                <div class="text-center p-3">
                                    <i class="bi bi-lightning-charge text-warning" style="font-size: 2rem;"></i>
                                    <h6 class="mt-2">高性能</h6>
                                    <p class="small text-muted">优化的架构设计，响应迅速</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center p-3">
                                    <i class="bi bi-shield-check text-success" style="font-size: 2rem;"></i>
                                    <h6 class="mt-2">安全可靠</h6>
                                    <p class="small text-muted">企业级安全防护机制</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center p-3">
                                    <i class="bi bi-robot text-info" style="font-size: 2rem;"></i>
                                    <h6 class="mt-2">AI智能</h6>
                                    <p class="small text-muted">集成先进AI技术</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h6>安装内容：</h6>
                            <ul class="list-unstyled text-start mt-3">
                                <li><i class="bi bi-check-circle text-success"></i> 核心系统文件</li>
                                <li><i class="bi bi-check-circle text-success"></i> 数据库结构</li>
                                <li><i class="bi bi-check-circle text-success"></i> 基础配置</li>
                                <li><i class="bi bi-check-circle text-success"></i> 管理员账户</li>
                                <li><i class="bi bi-check-circle text-success"></i> 安全设置</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- 步骤2: 系统检查 -->
                <div class="step-content" data-step="2">
                    <h4><i class="bi bi-gear text-primary"></i> 系统环境检查</h4>
                    <p class="text-muted">正在检查您的服务器环境是否满足安装要求...</p>
                    
                    <div id="system-checks">
                        <div class="requirement-check" data-check="php">
                            <i class="bi bi-hourglass-split me-3"></i>
                            <span>检查PHP版本 (需要 >= 8.1)...</span>
                        </div>
                        <div class="requirement-check" data-check="extensions">
                            <i class="bi bi-hourglass-split me-3"></i>
                            <span>检查PHP扩展...</span>
                        </div>
                        <div class="requirement-check" data-check="permissions">
                            <i class="bi bi-hourglass-split me-3"></i>
                            <span>检查文件权限...</span>
                        </div>
                        <div class="requirement-check" data-check="memory">
                            <i class="bi bi-hourglass-split me-3"></i>
                            <span>检查内存限制...</span>
                        </div>
                        <div class="requirement-check" data-check="database">
                            <i class="bi bi-hourglass-split me-3"></i>
                            <span>检查数据库支持...</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 text-center" style="display: none;" id="check-complete">
                        <div class="alert alert-success">
                            <i class="bi bi-check-circle"></i> 所有系统检查已通过，可以继续安装！
                        </div>
                    </div>
                </div>
                
                <!-- 步骤3: 数据库配置 -->
                <div class="step-content" data-step="3">
                    <h4><i class="bi bi-database text-primary"></i> 数据库配置</h4>
                    <p class="text-muted">请配置数据库连接信息</p>
                    
                    <form id="database-form">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">数据库类型</label>
                                    <select class="form-select" name="db_type" required>
                                        <option value="mysql">MySQL</option>
                                        <option value="sqlite" selected>SQLite (推荐)</option>
                                        <option value="pgsql">PostgreSQL</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">数据库主机</label>
                                    <input type="text" class="form-control" name="db_host" value="localhost" placeholder="localhost">
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">数据库端口</label>
                                    <input type="number" class="form-control" name="db_port" value="3306" placeholder="3306">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">数据库名称</label>
                                    <input type="text" class="form-control" name="db_name" value="alingai_pro" placeholder="alingai_pro" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">数据库用户名</label>
                                    <input type="text" class="form-control" name="db_username" placeholder="数据库用户名">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">数据库密码</label>
                                    <input type="password" class="form-control" name="db_password" placeholder="数据库密码">
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <button type="button" class="btn btn-outline-primary" onclick="testDatabase()">
                                <i class="bi bi-plug"></i> 测试连接
                            </button>
                            <span id="db-test-result" class="ms-3"></span>
                        </div>
                    </form>
                </div>
                
                <!-- 步骤4: 管理员配置 -->
                <div class="step-content" data-step="4">
                    <h4><i class="bi bi-person-gear text-primary"></i> 管理员账户设置</h4>
                    <p class="text-muted">设置系统管理员账户信息</p>
                    
                    <form id="admin-form">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">管理员用户名</label>
                                    <input type="text" class="form-control" name="admin_username" value="admin" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">管理员邮箱</label>
                                    <input type="email" class="form-control" name="admin_email" placeholder="admin@example.com" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">管理员密码</label>
                                    <input type="password" class="form-control" name="admin_password" required>
                                    <small class="form-text text-muted">密码长度至少8位，包含字母和数字</small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">确认密码</label>
                                    <input type="password" class="form-control" name="admin_password_confirm" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">站点名称</label>
                            <input type="text" class="form-control" name="site_name" value="AlingAi Pro 5.0" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">站点URL</label>
                            <input type="url" class="form-control" name="site_url" value="http://localhost:8000" required>
                        </div>
                    </form>
                </div>
                
                <!-- 步骤5: 安装确认 -->
                <div class="step-content" data-step="5">
                    <h4><i class="bi bi-check-circle text-success"></i> 安装确认</h4>
                    <p class="text-muted">请确认以下配置信息，点击"开始安装"进行系统安装</p>
                    
                    <div id="install-summary">
                        <!-- 配置摘要将在这里显示 -->
                    </div>
                    
                    <div id="install-progress" style="display: none;">
                        <h5>安装进度</h5>
                        <div class="progress mb-3">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" id="install-progress-bar" style="width: 0%"></div>
                        </div>
                        <div id="install-status">准备开始安装...</div>
                    </div>
                    
                    <div id="install-complete" style="display: none;" class="text-center">
                        <div class="alert alert-success">
                            <h5><i class="bi bi-check-circle"></i> 安装完成！</h5>
                            <p>AlingAi Pro 5.0已成功安装到您的服务器上。</p>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div class="card border-primary">
                                    <div class="card-body text-center">
                                        <i class="bi bi-house-door text-primary" style="font-size: 2rem;"></i>
                                        <h6 class="mt-2">访问前台</h6>
                                        <a href="../index.html" class="btn btn-outline-primary btn-sm">
                                            <i class="bi bi-box-arrow-up-right"></i> 打开网站
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-success">
                                    <div class="card-body text-center">
                                        <i class="bi bi-gear text-success" style="font-size: 2rem;"></i>
                                        <h6 class="mt-2">管理后台</h6>
                                        <a href="../admin/" class="btn btn-outline-success btn-sm">
                                            <i class="bi bi-box-arrow-up-right"></i> 管理面板
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 导航按钮 -->
                <div class="d-flex justify-content-between mt-4">
                    <button type="button" class="btn btn-outline-secondary" id="prev-btn" onclick="prevStep()" style="display: none;">
                        <i class="bi bi-arrow-left"></i> 上一步
                    </button>
                    <button type="button" class="btn btn-gradient" id="next-btn" onclick="nextStep()">
                        下一步 <i class="bi bi-arrow-right"></i>
                    </button>
                    <button type="button" class="btn btn-gradient" id="install-btn" onclick="startInstall()" style="display: none;">
                        <i class="bi bi-download"></i> 开始安装
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="install.js"></script>
</body>
</html>
