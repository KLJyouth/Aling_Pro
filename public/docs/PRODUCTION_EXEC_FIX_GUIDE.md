# ğŸ”§ ç”Ÿäº§æœåŠ¡å™¨ exec() å‡½æ•°ç¦ç”¨é—®é¢˜ - å¿«é€Ÿä¿®å¤æŒ‡å—

## ğŸš¨ é—®é¢˜æè¿°
åœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Šè¿è¡Œ `php install/install.php` æ—¶å‡ºç°é”™è¯¯ï¼š
```
PHP Fatal error: Call to undefined function exec() in /www/wwwroot/deepseek/install/install.php:239
```

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ³•1: ä½¿ç”¨å·²ä¿®å¤çš„æ–‡ä»¶ï¼ˆæ¨èï¼‰

1. **ä¸‹è½½æœ€æ–°çš„ä¿®å¤ç‰ˆæœ¬**
   ```bash
   # å¤‡ä»½å½“å‰install.php
   cp install/install.php install/install.php.backup
   
   # å¦‚æœæ‚¨æœ‰è®¿é—®åŸå§‹ä»£ç çš„æƒé™ï¼Œè¯·æ›¿æ¢ä¸ºæœ€æ–°ç‰ˆæœ¬çš„install.php
   ```

2. **æˆ–è€…æ‰‹åŠ¨ä¿®å¤ç¬¬239è¡Œ**
   ç¼–è¾‘ `/www/wwwroot/deepseek/install/install.php` æ–‡ä»¶ï¼Œæ‰¾åˆ°ç¬¬239è¡Œé™„è¿‘çš„ä»£ç ï¼š
   
   **ä¿®æ”¹å‰ (ç¬¬239è¡Œ):**
   ```php
   exec('mysql --version 2>&1', $output, $returnCode);
   ```
   
   **ä¿®æ”¹å:**
   ```php
   if (function_exists('exec')) {
       exec('mysql --version 2>&1', $output, $returnCode);
       if ($returnCode === 0) {
           $result['checks'][] = "âœ… MySQLå®¢æˆ·ç«¯: å·²å®‰è£…";
       } else {
           $result['missing'][] = "MySQL";
           $result['checks'][] = "âŒ MySQLå®¢æˆ·ç«¯: æœªå®‰è£…";
       }
   } else {
       $result['checks'][] = "âš ï¸ exec()å‡½æ•°è¢«ç¦ç”¨ï¼Œè·³è¿‡MySQLå®¢æˆ·ç«¯æ£€æŸ¥";
   }
   ```

### æ–¹æ³•2: ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒå…¼å®¹æ¨¡å¼

1. **æ·»åŠ è·³è¿‡å‚æ•°**
   ```bash
   php install/install.php --skip-exec-checks
   ```

2. **æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡**
   ```bash
   PRODUCTION_MODE=1 php install/install.php
   ```

## ğŸ” éªŒè¯ä¿®å¤

1. **è¿è¡Œå…¼å®¹æ€§æ£€æŸ¥**
   ```bash
   php production_compatibility_check.php
   ```

2. **é‡æ–°è¿è¡Œå®‰è£…ç¨‹åº**
   ```bash
   php install/install.php
   ```

## ğŸ“‹ å®Œæ•´çš„ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ­¥éª¤

1. **ç¯å¢ƒæ£€æŸ¥**
   ```bash
   # æ£€æŸ¥PHPç‰ˆæœ¬
   php -v
   
   # æ£€æŸ¥è¢«ç¦ç”¨çš„å‡½æ•°
   php -r "echo 'Disabled functions: ' . ini_get('disable_functions');"
   ```

2. **ä¿®å¤å…¼å®¹æ€§é—®é¢˜**
   ```bash
   # è¿è¡Œå…¼å®¹æ€§æ£€æŸ¥
   php production_compatibility_check.php
   
   # åº”ç”¨ä¿®å¤ï¼ˆå¦‚æœéœ€è¦ï¼‰
   # æ‰‹åŠ¨ç¼–è¾‘ç›¸å…³æ–‡ä»¶æˆ–ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   # å¦‚æœæœ‰Composerè®¿é—®æƒé™
   composer install --no-dev --optimize-autoloader
   ```

4. **è¿è¡Œå®‰è£…ç¨‹åº**
   ```bash
   php install/install.php
   ```

5. **éªŒè¯ä¸‰å®Œç¼–è¯‘**
   ```bash
   php three_complete_compilation_validator.php
   ```

## ğŸ›¡ï¸ å¸¸è§ç”Ÿäº§ç¯å¢ƒé™åˆ¶åŠè§£å†³æ–¹æ¡ˆ

### è¢«ç¦ç”¨çš„å‡½æ•°æ¸…å•
- `exec()` - æ‰§è¡Œå¤–éƒ¨å‘½ä»¤
- `shell_exec()` - æ‰§è¡Œshellå‘½ä»¤
- `system()` - æ‰§è¡Œç³»ç»Ÿå‘½ä»¤
- `passthru()` - æ‰§è¡Œå‘½ä»¤å¹¶è¾“å‡º
- `putenv()` - è®¾ç½®ç¯å¢ƒå˜é‡

### è§£å†³ç­–ç•¥
1. **å‡½æ•°å­˜åœ¨æ€§æ£€æŸ¥** - ä½¿ç”¨ `function_exists()` æ£€æŸ¥
2. **ä¼˜é›…é™çº§** - æä¾›æ›¿ä»£æ–¹æ¡ˆæˆ–è·³è¿‡éæ ¸å¿ƒåŠŸèƒ½
3. **å…¼å®¹æ€§æ¨¡å¼** - åœ¨å—é™ç¯å¢ƒä¸­ä½¿ç”¨å®‰å…¨çš„æ›¿ä»£æ–¹æ³•

## ğŸ“ ä¿®å¤ä»£ç æ¨¡æ¿

å¦‚æœéœ€è¦æ‰‹åŠ¨ä¿®å¤å…¶ä»–æ–‡ä»¶ä¸­çš„ç±»ä¼¼é—®é¢˜ï¼Œä½¿ç”¨ä»¥ä¸‹æ¨¡æ¿ï¼š

```php
// ä¿®å¤exec()å‡½æ•°
if (function_exists('exec')) {
    exec($command, $output, $returnCode);
    // å¤„ç†ç»“æœ...
} else {
    // æä¾›æ›¿ä»£æ–¹æ¡ˆæˆ–è·³è¿‡
    $output = [];
    $returnCode = 1;
    // è®°å½•è­¦å‘Šä¿¡æ¯
}

// ä¿®å¤shell_exec()å‡½æ•°
if (function_exists('shell_exec')) {
    $output = shell_exec($command);
    // å¤„ç†è¾“å‡º...
} else {
    $output = '';
    // è®°å½•è­¦å‘Šä¿¡æ¯
}

// ä¿®å¤putenv()å‡½æ•°
if (function_exists('putenv')) {
    putenv("$key=$value");
} else {
    // ä½¿ç”¨$_ENVæ›¿ä»£
    $_ENV[$key] = $value;
}
```

## ğŸ¯ é¢„æœŸç»“æœ

ä¿®å¤åï¼Œå®‰è£…ç¨‹åºåº”è¯¥èƒ½å¤Ÿï¼š
1. âœ… æ£€æµ‹åˆ°å‡½æ•°è¢«ç¦ç”¨
2. âœ… æ˜¾ç¤ºå‹å¥½çš„è­¦å‘Šä¿¡æ¯
3. âœ… ç»§ç»­å®‰è£…è¿‡ç¨‹è€Œä¸ä¸­æ–­
4. âœ… è·³è¿‡éœ€è¦å—é™å‡½æ•°çš„éæ ¸å¿ƒæ£€æŸ¥
5. âœ… å®Œæˆä¸‰å®Œç¼–è¯‘éªŒè¯

## ğŸ“ æ”¯æŒ

å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥æœåŠ¡å™¨çš„PHPé…ç½®
2. ç¡®è®¤æ‰€æœ‰æ–‡ä»¶éƒ½å·²æ­£ç¡®ä¸Šä¼ 
3. éªŒè¯æ–‡ä»¶æƒé™è®¾ç½®
4. æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯æ—¥å¿—

---
**Generated by**: AlingAi Pro Enterprise System  
**Version**: 3.0.0-production-ready  
**Date**: 2025å¹´6æœˆ8æ—¥
